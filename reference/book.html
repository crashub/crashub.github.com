<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRaSH Reference Guide</title>
<style>
@import url(http://openshift.redhat.com/app/assets-20130701203230/overpass.css);
@import url(http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/*! normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { background: #fff; /* 1 */ color: #000; /* 2 */ font-family: sans-serif; /* 3 */ -ms-text-size-adjust: 100%; /* 4 */ -webkit-text-size-adjust: 100%; /* 4 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: #e5e5e5; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.15625em; line-height: 1.6; }

.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .mathblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #4d4d4d; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #006699; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #ea0011; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: "Helvetica Neue", Helvetica, "Liberation Sans", Arial, sans-serif; font-weight: normal; font-size: 0.9375em; line-height: 1.4; margin-bottom: 1.375em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Overpass, "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: black; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #4d4d4d; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Menlo, Monaco, "Liberation Mono", Consolas, monospace; font-weight: normal; color: #3b3b3b; }

/* Lists */
ul, ol, dl { font-size: 0.9375em; line-height: 1.4; margin-bottom: 1.375em; list-style-position: outside; font-family: "Helvetica Neue", Helvetica, "Liberation Sans", Arial, sans-serif; }

ul, ol { margin-left: 1.625em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3em; font-weight: bold; }
dl dd { margin-bottom: 0.75em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #404040; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.375em; padding: 0 0 0 1em; border-left: 5px solid #ededed; }
blockquote cite { display: block; font-size: 0.8125em; color: #333333; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #333333; }

blockquote, blockquote p { line-height: 1.4; color: #404040; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

a:hover, a:focus { text-decoration: underline; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.9375em; padding: 1px 4px; white-space: nowrap; background-color: #eff1f1; border: 1px solid #d4d9d9; -webkit-border-radius: 0; border-radius: 0; text-shadow: none; }

pre, pre > code { line-height: 1.6; color: #3b3b3b; font-family: Menlo, Monaco, "Liberation Mono", Consolas, monospace; font-weight: normal; }

kbd.keyseq { color: #737373; }

kbd:not(.keyseq) { display: inline-block; color: #404040; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #272727; }

b.button:before { content: '[ '; }

b.button:after { content: ' ]'; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #404040; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }

#toctitle { color: #4d4d4d; }

@media only screen and (min-width: 768px) { body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: .90em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #cccccc; margin-bottom: 1.25em; padding: 1.25em; background: #e5e5e5; border-width: 0; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }

#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", Helvetica, "Liberation Sans", Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }

#footer { max-width: 100%; background-color: white; padding: 1.25em; }

#footer-text { color: #666666; line-height: 1.26; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: black; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: black; }

.imageblock, .literalblock, .listingblock, .mathblock, .verseblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .mathblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #404040; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #cccccc; margin-bottom: 1.25em; padding: 1.25em; background: #e5e5e5; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #cccccc; box-shadow: 0 1px 8px #cccccc; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #cccccc; margin-bottom: 1.25em; padding: 1.25em; background: #e5e5e5; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #4d4d4d; margin-top: 0; line-height: 1.4; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock > .content pre, .listingblock > .content pre { background: #eff1f1; border-width: 0 0 0 2px; border-style: solid; border-color: rgba(120, 120, 120, 0.35); -webkit-border-radius: 0; border-radius: 0; padding: 1em 1.5em 0.875em 1.5em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.7em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.7875em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.875em; } }

.listingblock > .content { position: relative; }

.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }

.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.sass:before { content: "sass"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }

table.pyhltable { border: 0; margin-bottom: 0; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }

.quoteblock { margin: 0 0 1.375em; padding: 0 0 0 1em; border-left: 5px solid #ededed; }
.quoteblock blockquote { margin: 0 0 1.375em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: 0.8125em; color: #333333; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 0; border-radius: 0; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }

th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }

th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }

tbody tr th { display: table-cell; line-height: 1.4; background: whitesmoke; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.875em; }

ul li ol { margin-left: 1.625em; }

dl dd { margin-left: 2em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.6875em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.6875em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .8em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.qanda > ol > li > p > em:only-child { color: #005580; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #006699; color: #004c73; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #404040; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

#header, #content, #footnotes { background: white; padding-left: 2.5em; padding-right: 2.5em; }

#header { margin-bottom: 0; }
#header > h1 { border-bottom: none; }

#footnotes { margin-bottom: 2em; }

.sect1 { padding-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .olist, .olist .ulist { margin-bottom: 0.34375em; }
</style>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<style>
/* Foundation stylesheet for CodeRay (to match GitHub theme) | MIT License | http://foundation.zurb.com */
table.CodeRay { border-collapse: collapse; padding: 2px; margin-bottom: 0; border: 0; background: transparent; }
table.CodeRay td { padding: 0 .5em; vertical-align: top; }
table.CodeRay td.line-numbers { text-align: right; color: #999; border-right: 1px solid #e5e5e5; padding-left: 0; }
span.line-numbers { border-right: 1px solid #E5E5E5; color: #999; display: inline-block; margin-right: 0.5em; padding-right: 0.5em; }
.CodeRay td.line-numbers strong, .CodeRay span.line-numbers strong { font-weight: normal; }
.CodeRay .debug { color: white !important; background: blue !important; }
.CodeRay .annotation { color: #007; }
.CodeRay .attribute-name { color: #f08; }
.CodeRay .attribute-value { color: #700; }
.CodeRay .binary { color: #509; }
.CodeRay .comment  { color: #999; font-style: italic; }
.CodeRay .char { color: #04D; }
.CodeRay .char .content { color: #04D; }
.CodeRay .char .delimiter { color: #039; }
.CodeRay .class { color: #458; }
.CodeRay .complex { color: #A08; }
.CodeRay .constant { color: teal; }
.CodeRay .color { color: #0A0; }
.CodeRay .class-variable { color: #369; }
.CodeRay .decorator { color: #B0B; }
.CodeRay .definition { color: #099; }
.CodeRay .directive { color: #088; }
.CodeRay .delimiter { color: black; }
.CodeRay .doc { color: #970; }
.CodeRay .doctype { color: #34b; }
.CodeRay .doc-string { color: #D42; }
.CodeRay .escape  { color: #666; }
.CodeRay .entity { color: #800; }
.CodeRay .error { color: #808; }
.CodeRay .exception { color: #C00; }
.CodeRay .filename { color: #099; }
.CodeRay .function { color: #900; }
.CodeRay .global-variable { color: teal; }
.CodeRay .hex { color: #058; }
.CodeRay .integer  { color: #099; }
.CodeRay .include { color: #B44; }
.CodeRay .inline { color: black; }
.CodeRay .inline .inline { background: #ccc; }
.CodeRay .inline .inline .inline { background: #bbb; }
.CodeRay .inline .inline-delimiter { color: #D14; }
.CodeRay .inline-delimiter { color: #D14; }
.CodeRay .important { color: #f00; }
.CodeRay .interpreted { color: #B2B; }
.CodeRay .instance-variable { color: teal; }
.CodeRay .label { color: #970; }
.CodeRay .local-variable { color: #963; }
.CodeRay .octal { color: #40E; }
.CodeRay .predefined { color: #369; }
.CodeRay .preprocessor { color: #579; }
.CodeRay .pseudo-class { color: #00C; }
.CodeRay .predefined-type { color: #074; }
.CodeRay .reserved, .keyword  { color: #000; }
.CodeRay .key { color: #808; }
.CodeRay .key .delimiter { color: #606; }
.CodeRay .key .char { color: #80f; }
.CodeRay .value { color: #088; }
.CodeRay .regexp { background-color: #fff0ff; }
.CodeRay .regexp .content { color: #808; }
.CodeRay .regexp .delimiter { color: #404; }
.CodeRay .regexp .modifier { color: #C2C; }
.CodeRay .regexp .function  { color: #404; font-weight: bold; }
.CodeRay .string { color: #D20; }
.CodeRay .string .string { }
.CodeRay .string .string .string { background-color: #ffd0d0; }
.CodeRay .string .content { color: #D14; }
.CodeRay .string .char { color: #D14; }
.CodeRay .string .delimiter { color: #D14; }
.CodeRay .shell { color: #D14; }
.CodeRay .shell .content { }
.CodeRay .shell .delimiter { color: #D14; }
.CodeRay .symbol { color: #990073; }
.CodeRay .symbol .content { color: #A60; }
.CodeRay .symbol .delimiter { color: #630; }
.CodeRay .tag, .CodeRay .attribute-name { color: #070; }
.CodeRay .tag-special { color: #D70; }
.CodeRay .type { color: #339; }
.CodeRay .variable  { color: #036; }
.CodeRay .insert { background: #afa; }
.CodeRay .delete { background: #faa; }
.CodeRay .change { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505; }
.CodeRay .insert .insert { color: #080; }
.CodeRay .delete .delete { color: #800; }
.CodeRay .change .change { color: #66f; }
.CodeRay .head .head { color: #f4f; }

</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>CRaSH Reference Guide</h1>
<span id="author" class="author">Julien Viet</span><br>
<span id="email" class="email"><a href="http://www.julienviet.com">http://www.julienviet.com</a></span><br>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#running_crash">Running CRaSH</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#_standalone">Standalone</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_standalone_mode">Standalone mode</a></li>
<li><a href="#_attach_mode">Attach mode</a></li>
<li><a href="#_configuration">Configuration</a></li>
<li><a href="#_resource_extraction">Resource extraction</a></li>
</ul>
</li>
<li><a href="#_embedded_mode">Embedded mode</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_embedding_in_a_web_app">Embedding in a web app</a></li>
<li><a href="#_embedding_in_spring">Embedding in Spring</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_interacting_with_the_shell">Interacting with the shell</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#_shell_usage">Shell usage</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#connection">Connection</a></li>
<li><a href="#_features">Features</a></li>
</ul>
</li>
<li><a href="#_command_usage">Command usage</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_getting_basic_help">Getting basic help</a></li>
<li><a href="#_command_line_usage">Command line usage</a></li>
</ul>
</li>
<li><a href="#_command_pipeline">Command pipeline</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_pipe_commands">Pipe commands</a></li>
<li><a href="#_creating_a_pipeline">Creating a pipeline</a></li>
<li><a href="#_pipeline_commands">Pipeline commands</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_configuration_2">Configuration</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#_mount_point_configuration">Mount point configuration</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_configuring_the_standalone_mode">Configuring the standalone mode</a></li>
<li><a href="#_configuring_the_attach_mode">Configuring the attach mode</a></li>
<li><a href="#_configuring_the_web_application_mode">Configuring the web application mode</a></li>
<li><a href="#_configuring_the_spring_mode">Configuring the spring mode</a></li>
</ul>
</li>
<li><a href="#_configuration_properties">Configuration properties</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_configuring_the_standalone_or_attach_mode">Configuring the standalone or attach mode</a></li>
<li><a href="#_configuring_the_web_application_mode_2">Configuring the web application mode</a></li>
<li><a href="#_configuration_properties_2">Configuration properties</a></li>
<li><a href="#_removing_telnet_or_ssh_access">Removing telnet or SSH access</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_connectors">Connectors</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#_connectors_2">Connectors</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_jline_connector">JLine connector</a></li>
<li><a href="#_ssh_connector">SSH connector</a></li>
<li><a href="#_telnet_connector">Telnet connector</a></li>
<li><a href="#_web_connector">Web connector</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#developers">Developers</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#developping_commands">Developping commands</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_simple_command">Simple command</a></li>
<li><a href="#_sub_commands">Sub commands</a></li>
<li><a href="#_java_commands">Java commands</a></li>
<li><a href="#_command_line_annotations">Command line annotations</a></li>
<li><a href="#_parameter_multiplicity">Parameter multiplicity</a></li>
<li><a href="#_parameter_types">Parameter types</a></li>
</ul>
</li>
<li><a href="#_adding_style">Adding style</a></li>
<li><a href="#command_context">Command context</a></li>
<li><a href="#_object_pipeline">Object pipeline</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_producer_commands">Producer commands</a></li>
<li><a href="#_pipe_commands_2">Pipe commands</a></li>
</ul>
</li>
<li><a href="#_command_interruption">Command interruption</a></li>
<li><a href="#_keyboard_interactions">Keyboard interactions</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_reading_a_line">Reading a line</a></li>
<li><a href="#_keyboard_events">Keyboard events</a></li>
</ul>
</li>
<li><a href="#_renderers">Renderers</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_predefined_renderers">Predefined renderers</a></li>
<li><a href="#_implementing_a_renderer">Implementing a renderer</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_groovy_guide">Groovy guide</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#commands_as_script">Commands as a script</a></li>
<li><a href="#_inter_command_api">Inter command API</a></li>
<li><a href="#_the_groovy_repl">The Groovy REPL</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_evaluating_commands">Evaluating commands</a></li>
<li><a href="#_passing_options_and_arguments">Passing options and arguments</a></li>
<li><a href="#_options_and_arguments_binding">Options and arguments binding</a></li>
<li><a href="#_command_pipeline_2">Command pipeline</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_extending_crash">Extending CRaSH</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#_embedding_crash">Embedding CRaSH</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#standalone_bootstrap">Standalone bootstrap</a></li>
<li><a href="#_standalone_crash">Standalone CRaSH</a></li>
</ul>
</li>
<li><a href="#pluggable_auth">Pluggable authentication</a></li>
</ul>
</li>
<li><a href="#_mail_plugin">Mail plugin</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#_deployment">Deployment</a></li>
<li><a href="#_configuration_3">Configuration</a></li>
<li><a href="#_mail_command">Mail command</a></li>
</ul>
</li>
<li><a href="#_cron_plugin">Cron plugin</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#_deployment_2">Deployment</a></li>
<li><a href="#_configuration_file">Configuration file</a></li>
</ul>
</li>
<li><a href="#_hey_i_want_to_contribute">Hey, I want to contribute!</a></li>
<li><a href="#_commands_reference">Appendix A: Commands reference</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#_dashboard">dashboard</a></li>
<li><a href="#_egrep">egrep</a></li>
<li><a href="#_env">env</a></li>
<li><a href="#_filter">filter</a></li>
<li><a href="#_java">java</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_java_type">java type</a></li>
</ul>
</li>
<li><a href="#_jdbc">jdbc</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_jdbc_props">jdbc props</a></li>
<li><a href="#_jdbc_close">jdbc close</a></li>
<li><a href="#_jdbc_table">jdbc table</a></li>
<li><a href="#_jdbc_open">jdbc open</a></li>
<li><a href="#_jdbc_connect">jdbc connect</a></li>
<li><a href="#_jdbc_info">jdbc info</a></li>
<li><a href="#_jdbc_execute">jdbc execute</a></li>
<li><a href="#_jdbc_select">jdbc select</a></li>
<li><a href="#_jdbc_tables">jdbc tables</a></li>
</ul>
</li>
<li><a href="#_jmx">jmx</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_jmx_get">jmx get</a></li>
<li><a href="#_jmx_find">jmx find</a></li>
<li><a href="#_jmx_attributes">jmx attributes</a></li>
</ul>
</li>
<li><a href="#_jndi">jndi</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_jndi_find">jndi find</a></li>
</ul>
</li>
<li><a href="#_jpa">jpa</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_jpa_close">jpa close</a></li>
<li><a href="#_jpa_open">jpa open</a></li>
<li><a href="#_jpa_entity">jpa entity</a></li>
<li><a href="#_jpa_select">jpa select</a></li>
<li><a href="#_jpa_entities">jpa entities</a></li>
</ul>
</li>
<li><a href="#_jvm">jvm</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_jvm_gc">jvm gc</a></li>
<li><a href="#_jvm_system">jvm system</a></li>
<li><a href="#_jvm_runtime">jvm runtime</a></li>
<li><a href="#_jvm_heap">jvm heap</a></li>
<li><a href="#_jvm_pools">jvm pools</a></li>
<li><a href="#_jvm_pool">jvm pool</a></li>
<li><a href="#_jvm_classloading">jvm classloading</a></li>
<li><a href="#_jvm_compilation">jvm compilation</a></li>
<li><a href="#_jvm_nonheap">jvm nonheap</a></li>
<li><a href="#_jvm_top">jvm top</a></li>
</ul>
</li>
<li><a href="#_less">less</a></li>
<li><a href="#_log">log</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_log_add">log add</a></li>
<li><a href="#_log_set">log set</a></li>
<li><a href="#_log_tail">log tail</a></li>
<li><a href="#_log_ls">log ls</a></li>
<li><a href="#_log_send">log send</a></li>
</ul>
</li>
<li><a href="#_man">man</a></li>
<li><a href="#_shell">shell</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_shell_properties">shell properties</a></li>
<li><a href="#_shell_plugins">shell plugins</a></li>
</ul>
</li>
<li><a href="#_sleep">sleep</a></li>
<li><a href="#_sort">sort</a></li>
<li><a href="#_system">system</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_system_gc">system gc</a></li>
<li><a href="#_system_propls">system propls</a></li>
<li><a href="#_system_propset">system propset</a></li>
<li><a href="#_system_propget">system propget</a></li>
<li><a href="#_system_proprm">system proprm</a></li>
<li><a href="#_system_freemem">system freemem</a></li>
<li><a href="#_system_totalmem">system totalmem</a></li>
</ul>
</li>
<li><a href="#_thread_2">thread</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_thread_stop">thread stop</a></li>
<li><a href="#_thread_interrupt">thread interrupt</a></li>
<li><a href="#_thread_ls">thread ls</a></li>
<li><a href="#_thread_top">thread top</a></li>
<li><a href="#_thread_dump">thread dump</a></li>
</ul>
</li>
<li><a href="#_help">help</a></li>
<li><a href="#_repl">repl</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Common Reusable SHell (CRaSH) deploys in a Java runtime and provides interactions with the JVM.
Commands are written in Groovy and can be developed at runtime making the extension of the shell very easy
with fast development cycle.</p>
</div>
</div>
</div>
<h1 id="running_crash" class="sect0"><a class="anchor" href="#running_crash"></a>Running CRaSH</h1>
<div class="paragraph">
<p>There are several ways to run CRaSH, as a standalone application it controls its own JVM or as an embedded
service in an existing runtime like a web application or a Spring application.</p>
</div>
<div class="sect1">
<h2 id="_standalone"><a class="anchor" href="#_standalone"></a>Standalone</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_standalone_mode"><a class="anchor" href="#_standalone_mode"></a>Standalone mode</h3>
<div class="paragraph">
<p>The standalone mode allows you to run CRaSH from the command line directly. It provides the same functionality as the
war deployment but does not require a web container as it runs its own virtual machine. The <em>crash</em> directory
in the application contains the standalone distribution.</p>
</div>
<div class="paragraph">
<p>The bin directory <em>/crash/bin</em> can be added to the system path, it contains the <em>crash.sh</em> script that will start
the standalone mode, for instance you can set it up this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&gt; export PATH=/.../crash/bin:$PATH
&gt; crash.sh
   ______
 .~      ~. |`````````,       .'.                   ..'''' |         |
|           |'''|'''''      .''```.              .''       |_________|
|           |    `.       .'       `.         ..'          |         |
 `.______.' |      `.   .'           `. ....''             |         | 1.3.0-beta21

Follow and support the project on http://www.crashub.org
Welcome to jerry + !
It is 2014-05-20 09:02:35 CEST now</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s review quickly what you can find in standalone crash:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>bin</em> directory contains the <em>crash.sh</em> script and the standalone crash jar file</p>
</li>
<li>
<p>The <em>conf</em> directory contains the configuration properties <em>crash.properties</em> and JVM logging configuration <em>logging.properties</em></p>
</li>
<li>
<p>The <em>cmd</em> directory contains the commands that will be available in crash by default it contains a few example commands</p>
</li>
<li>
<p>The <em>lib</em> directory contains the various libraries used by crash, you should place additional jar files there</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_attach_mode"><a class="anchor" href="#_attach_mode"></a>Attach mode</h3>
<div class="paragraph">
<p>The attach mode allows you to attach CRaSH to a JVM located on the same host with the attach API provided by the Hotspot
JVM. It is the standalone mode attached to a running JVM specified by a process id. CRaSH will hook into the targetted JVM
instead of the JVM started by CRaSH. Let&#8217;s see quickly an example of how to use it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">&gt; jps
3165 RemoteMavenServer
20650 Test
20651 Jps

&gt; crash.sh 20650
   ______
 .~      ~. |`````````,       .'.                   ..'''' |         |
|           |'''|'''''      .''```.              .''       |_________|
|           |    `.       .'       `.         ..'          |         |
 `.______.' |      `.   .'           `. ....''             |         | 1.3.0-beta21

Follow and support the project on http://vietj.github.com/crash
Welcome to jerry + !
It is 2014-05-20 09:02:35 CEST now
%</pre>
</div>
</div>
<div class="paragraph">
<p>In this example we attached crash to the Test JVM. We obtained the Test JVM PID thanks to the <em>jps</em> command that belongs
to the Java Platform. During this mode the commands are executed in the target JVM.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h3>
<div class="paragraph">
<p>The standalone mode relies on the <code>org.crsh.standalone.CRaSH</code> class main method to configure and run the shell. The
startup scripts <em>crash.sh</em> and <em>crash.bar</em> configures this class. You can tweak those scripts to your environment,
let&#8217;s review the options and arguments of <code>CRaSH</code>:</p>
</div>
<div class="sect3">
<h4 id="__em_cmd_em_option"><a class="anchor" href="#__em_cmd_em_option"></a><em>--cmd</em> option</h4>
<div class="paragraph">
<p>The <em>--cmd</em> option specifies a directory containing command source files. Such directory contains commands as <em>.groovy</em> files,
commands can be in directories for grouping purpose. Several folders can be specified by repeating the option.</p>
</div>
</div>
<div class="sect3">
<h4 id="__em_cmd_mode_em_option"><a class="anchor" href="#__em_cmd_mode_em_option"></a><em>--cmd-mode</em> option</h4>
<div class="paragraph">
<p>The standalone shell search commands in folders (specified with the <em>--cmd</em> option and in the classpath (under the
<em>/crash/commands/</em> folder). The <em>--cmd-mode</em> option defines how to handle the classpath commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>read</em> option value uses commands from directories and classpath.</p>
</li>
<li>
<p>The <em>copy</em> option value scans the classpath during the startup and copies the commands in the first command folder, then commands
are used from the folders. This value requires at least one command directory to be specified for extracting the commands.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="__em_conf_em_option"><a class="anchor" href="#__em_conf_em_option"></a><em>--conf</em> option</h4>
<div class="paragraph">
<p>The <em>--conf</em> option specifies a directory containing configuration files. Several folders can be specified by repeating the option.</p>
</div>
</div>
<div class="sect3">
<h4 id="__em_conf_mode_em_option"><a class="anchor" href="#__em_conf_mode_em_option"></a><em>--conf-mode</em> option</h4>
<div class="paragraph">
<p>The standalone shell search configuration files in folders (specified with the <em>--conf</em> option and in the classpath (under the
<em>/crash/</em> folder). The <em>--conf-mode</em> option defines how to handle the classpath configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>read</em> option value uses configuration files from directories and classpath.</p>
</li>
<li>
<p>The <em>copy</em> option value scans the classpath during the startup and copies the files in the first configuration folder, then configuration
are used from the folders. This value requires at least one conf directory to be specified for extracting the configuration files.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="__em_property_em_option"><a class="anchor" href="#__em_property_em_option"></a><em>--property</em> option</h4>
<div class="paragraph">
<p>The <em>--cmd</em> option sets and overrides a shell configuration property, the value follows the pattern <em>a=b</em>, for instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>crash.sh --property crash.telnet.port=3000</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__em_non_interactive_em_option"><a class="anchor" href="#__em_non_interactive_em_option"></a><em>--non-interactive</em> option</h4>
<div class="paragraph">
<p>The <em>--non-interactive</em> option disable the usage of the JVM input and output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>crash.sh --non-interactive</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__em_pid_em_arguments"><a class="anchor" href="#__em_pid_em_arguments"></a><em>pid</em> arguments</h4>
<div class="paragraph">
<p>The <code>org.crsh.standalone.CRaSH</code> main has an optional list of arguments that are JVM <em>process id</em>. When one or several JVM process id
  are specified, CRaSH will dynamically attach to this virtual machine and will be executed in that machine. By default the two JVM will
  communicate with a socket unless the <em>non-interactive</em> option is set.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="icon-warning" title="Warning"></i>
</td>
<td class="content">
When more than one process id is specified, the <em>non-interactive</em> option must be set because CRaSH will not be able
to aggregate two command lines in the same terminal.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resource_extraction"><a class="anchor" href="#_resource_extraction"></a>Resource extraction</h3>
<div class="paragraph">
<p>When the options <em>--cmd-mode</em> or <em>--conf-mode</em> are set to the <em>copy</em>, CRaSH will scan the classpath and extract the
 resources in the corresponding directory.</p>
</div>
<div class="paragraph">
<p>The default value of these options is <em>copy</em> however no copy happens unless at least one directory for extracting the resources
is specified, therefore</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>org.crsh.standalone.CRaSH</code> does nothing by default</p>
</li>
<li>
<p>The <em>crash.sh</em> or <em>crash.bat</em> extracts the resources in the corresponding directory as the <em>cmd</em> and <em>conf</em> directories
are specified</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To prevent any resource copying the value <em>read</em> should be used.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_embedded_mode"><a class="anchor" href="#_embedded_mode"></a>Embedded mode</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_embedding_in_a_web_app"><a class="anchor" href="#_embedding_in_a_web_app"></a>Embedding in a web app</h3>
<div class="paragraph">
<p>CRaSH can use a standard web archive to be deployed in a web container. The war file is used for its packaging capabilities
and triggering the CRaSH life cycle start/stop. In this mode CRaSH has two packaging available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>core</em> war file found under <em>deploy/core/crash.war</em> provides the base CRaSH functionnalities</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You have to copy the <em>crash.war</em> in the appropriate server, regardless of the packaging used.</p>
</div>
<div class="paragraph">
<p>If you want you can embed CRaSH in your own <em>web.xml</em> configuration:</p>
</div>
<div class="listingblock">
<div class="title">Embedding CRaSH in a web application</div>
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="tag">&lt;web-app&gt;</span>
  <span class="tag">&lt;listener&gt;</span>
    <span class="tag">&lt;listener-class&gt;</span>org.crsh.plugin.WebPluginLifeCycle<span class="tag">&lt;/listener-class&gt;</span>
  <span class="tag">&lt;/listener&gt;</span>
<span class="tag">&lt;/web-app&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_embedding_in_spring"><a class="anchor" href="#_embedding_in_spring"></a>Embedding in Spring</h3>
<div class="paragraph">
<p>CRaSH can be easily embedded and configured in a Spring configuration.</p>
</div>
<div class="sect3">
<h4 id="_embedding_as_a_spring_bean"><a class="anchor" href="#_embedding_as_a_spring_bean"></a>Embedding as a Spring bean</h4>
<div class="paragraph">
<p>Here is an example of embedding crash:</p>
</div>
<div class="listingblock">
<div class="title">Embedding CRaSH in Spring</div>
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;beans</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span>
       <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
       <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span>
       <span class="content">http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

        <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.crsh.spring.SpringBootstrap</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">config</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;props&gt;</span>
        <span class="comment">&lt;!-- VFS configuration --&gt;</span>
        <span class="tag">&lt;prop</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">crash.vfs.refresh_period</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>1<span class="tag">&lt;/prop&gt;</span>

        <span class="comment">&lt;!-- SSH configuration --&gt;</span>
        <span class="tag">&lt;prop</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">crash.ssh.port</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>2000<span class="tag">&lt;/prop&gt;</span>

        <span class="comment">&lt;!-- Optional SSH timeouts --&gt;</span>
        <span class="tag">&lt;prop</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">crash.ssh.auth-timeout</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>300000<span class="tag">&lt;/prop&gt;</span>
        <span class="tag">&lt;prop</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">crash.ssh.idle-timeout</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>300000<span class="tag">&lt;/prop&gt;</span>

        <span class="comment">&lt;!-- Telnet configuration --&gt;</span>
        <span class="tag">&lt;prop</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">crash.telnet.port</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>5000<span class="tag">&lt;/prop&gt;</span>

        <span class="comment">&lt;!-- Authentication configuration --&gt;</span>
        <span class="tag">&lt;prop</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">crash.auth</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>simple<span class="tag">&lt;/prop&gt;</span>
        <span class="tag">&lt;prop</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">crash.auth.simple.username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>admin<span class="tag">&lt;/prop&gt;</span>
        <span class="tag">&lt;prop</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">crash.auth.simple.password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>admin<span class="tag">&lt;/prop&gt;</span>
      <span class="tag">&lt;/props&gt;</span>
    <span class="tag">&lt;/property&gt;</span>
  <span class="tag">&lt;/bean&gt;</span>

<span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration properties are set as properties with the <em>config</em> property of the <code>SpringBootstrap</code> bean.</p>
</div>
<div class="paragraph">
<p>Any Spring managed beans that extend <code>org.crsh.plugin.CRaSHPlugin</code> will be automatically
registered as plugins in addition to those declared in <code>META-INF/services/org.crsh.plugin.CRaSHPlugin</code>.</p>
</div>
<div class="paragraph">
<p>For example, the following implements a CRaSH authentication plugin that uses a JDBC DataSource
managed by Spring:</p>
</div>
<div class="listingblock">
<div class="title">Spring managed authentication plugin</div>
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">example</span>;

<span class="keyword">import</span> <span class="include">java.sql.Connection</span>;
<span class="keyword">import</span> <span class="include">java.sql.PreparedStatement</span>;
<span class="keyword">import</span> <span class="include">java.sql.ResultSet</span>;

<span class="keyword">import</span> <span class="include">javax.sql.DataSource</span>;

<span class="keyword">import</span> <span class="include">org.crsh.auth.AuthenticationPlugin</span>;
<span class="keyword">import</span> <span class="include">org.crsh.plugin.CRaSHPlugin</span>;
<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Component</span>;

<span class="annotation">@Component</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">dbCrshAuth</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">DbCrshAuthPlugin</span> <span class="directive">extends</span> CRaSHPlugin&lt;AuthenticationPlugin&gt;
        <span class="directive">implements</span> AuthenticationPlugin {

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> <span class="predefined-type">DataSource</span> dataSource;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> AuthenticationPlugin getImplementation() {
        <span class="keyword">return</span> <span class="local-variable">this</span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> authenticate(<span class="predefined-type">String</span> username, <span class="predefined-type">String</span> password)
            <span class="directive">throws</span> <span class="exception">Exception</span> {
        <span class="predefined-type">Connection</span> conn = dataSource.getConnection();

        <span class="predefined-type">PreparedStatement</span> statement = conn
                .prepareStatement(<span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT COUNT(*) FROM users WHERE username = ? AND password = ?</span><span class="delimiter">&quot;</span></span>);
        statement.setString(<span class="integer">1</span>, username);
        statement.setString(<span class="integer">2</span>, password);

        <span class="predefined-type">ResultSet</span> rs = statement.executeQuery();
        <span class="keyword">return</span> rs.getInt(<span class="integer">1</span>) &gt;= <span class="integer">1</span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">dbCrshAuth</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="directive">public</span> <span class="type">void</span> setDataSource(<span class="predefined-type">DataSource</span> dataSource) {
        <span class="local-variable">this</span>.dataSource = dataSource;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code uses Spring annotation driven beans, but this works the same with beans configured
in XML:</p>
</div>
<div class="listingblock">
<div class="title">Custom authentication bean in spring.xml</div>
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;beans</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span>
       <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
       <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span>
       <span class="content">http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">example.DbCrshAuthPlugin</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dataSource</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dataSource</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/bean&gt;</span>

<span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_embedding_in_a_spring_web_app"><a class="anchor" href="#_embedding_in_a_spring_web_app"></a>Embedding in a Spring web app</h4>
<div class="paragraph">
<p>In case you are embedding CRaSH in a Spring application running with a servlet container, the bean
 <code>org.crsh.spring.SpringWebBootstrap</code> can be used instead of <code>org.crsh.spring.SpringBootstrap</code>. The <code>SpringWebBootstrap</code>
 extends the <code>SpringBootstrap</code> class and adds the <em>WEB-INF/crash</em> directory to the command path.</p>
</div>
<div class="paragraph">
<p>An example packaging comes with the CRaSH distribution, a <em>spring</em> war file found under <em>deploy/spring/crash.war</em> provides
the base CRaSH functionnalities bootstrapped by the Spring Framework. It can be used as an example for embedding CRaSH
 in Spring.</p>
</div>
<div class="paragraph">
<p>This example is bundled with a <em>spring</em> command that shows how the Spring factory or beans can be accessed within
a CRaSH command.</p>
</div>
</div>
</div>
</div>
</div>
<h1 id="_interacting_with_the_shell" class="sect0"><a class="anchor" href="#_interacting_with_the_shell"></a>Interacting with the shell</h1>
<div class="sect1">
<h2 id="_shell_usage"><a class="anchor" href="#_shell_usage"></a>Shell usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="connection"><a class="anchor" href="#connection"></a>Connection</h3>
<div class="paragraph">
<p>You need to connect using telnet, SSH or <em>directly</em> to use the
shell.  The last method is a special mode using the JVM input and output.</p>
</div>
<div class="sect3">
<h4 id="_telnet_access"><a class="anchor" href="#_telnet_access"></a>Telnet access</h4>
<div class="paragraph">
<p>Telnet connection is done on port 5000:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">(! 520)-&gt; telnet localhost 5000
Trying ::1...
Connected to localhost.
Escape character is '^]'.
   ______
 .~      ~. |`````````,       .'.                   ..'''' |         |
|           |'''|'''''      .''```.              .''       |_________|
|           |    `.       .'       `.         ..'          |         |
 `.______.' |      `.   .'           `. ....''             |         | 1.3.0-beta21

Follow and support the project on http://vietj.github.com/crash
Welcome to julien.local + !
It is 2014-05-20 09:02:35 CEST now</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>bye</code> command disconnect from the shell.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ssh_access"><a class="anchor" href="#_ssh_access"></a>SSH access</h4>
<div class="paragraph">
<p>SSH connection is done on port 2000 with the password <strong><em>crash</em></strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>juliens-macbook-pro:~ julien$ ssh -p 2000 -l root localhost
root@localhost's password:
CRaSH {crash-version} (http://vietj.github.com/crash)
Welcome to juliens-macbook-pro.local!
It is {localdatetime} now.
%</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>bye</code> command disconnect from the shell.</p>
</div>
</div>
<div class="sect3">
<h4 id="_native_access"><a class="anchor" href="#_native_access"></a>Native access</h4>
<div class="paragraph">
<p>A third mode is available for standalone CRaSH usage where it uses the
JVM native input and output. When you run in standalone, CRaSh will be available just after the JVM is launched.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_features"><a class="anchor" href="#_features"></a>Features</h3>
<div class="ulist">
<ul>
<li>
<p>Line edition: the current line can be edited via left and right arrow keys</p>
</li>
<li>
<p>History: the key up and key down enable history browsing</p>
</li>
<li>
<p>Quoting: simple quotes or double quotes allow to insert blanks in command options and arguments, for instance
<code>"old boy"</code> or <code><em>old boy</em></code>. One quote style can quote another, like <code>"hi, it's me"</code>.</p>
</li>
<li>
<p>Completion: an advanced completion system is available</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_command_usage"><a class="anchor" href="#_command_usage"></a>Command usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_getting_basic_help"><a class="anchor" href="#_getting_basic_help"></a>Getting basic help</h3>
<div class="paragraph">
<p>The <code>help</code> command will display the list of known commands by the shell.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% help
Try one of these commands with the -h or --help switch:

NAME      DESCRIPTION
help      provides basic help
repl      list the repl or change the current repl
cron      cron management
dashboard a monitoring dashboard
date      show the current time
egrep     search file(s) for lines that match a pattern
env       display the term env
filter    a filter for a stream of map
java      various java language commands
jdbc      JDBC connection
jmx       Java Management Extensions
jndi      Java Naming and Directory Interface
jpa       Java persistance API
jvm       JVM informations
log       logging commands
mail      send an mail to a list of recipients, the body of the mail is the input stream of the command.
man       format and display the on-line manual pages
shell     shell related command
sleep     sleep for some time
sort      sort a map
system    vm system properties commands
thread    JVM thread commands</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_command_line_usage"><a class="anchor" href="#_command_line_usage"></a>Command line usage</h3>
<div class="paragraph">
<p>The basic CRaSH usage is like any shell, you just type a command with its options and arguments. However it is possible
 to compose commands and create powerful combinations.</p>
</div>
<div class="sect3">
<h4 id="_basic_command_usage"><a class="anchor" href="#_basic_command_usage"></a>Basic command usage</h4>
<div class="paragraph">
<p>Typing the command followed by options and arguments will do the job</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% ls /
...</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_command_help_display"><a class="anchor" href="#_command_help_display"></a>Command help display</h4>
<div class="paragraph">
<p>Any command help can be displayed by using the -h argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% help -h
usage: help [-h | --help]

   [-h | --help] this help</pre>
</div>
</div>
<div class="paragraph">
<p>In addition of that, commands can have a complete manual that can be displayed thanks to the <code>man</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% man help
NAME
       help - provides basic help

SYNOPSIS
       help [-h | --help]

PARAMETERS
       [-h | --help]
           Display this help message</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_command_pipeline"><a class="anchor" href="#_command_pipeline"></a>Command pipeline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A CRaSH command is able to consume and produce a stream of object, allowing complex interactions between commands
where they can exchange stream of compatible objets. Such commands are called <em>pipe</em> commands.</p>
</div>
<div class="sect2">
<h3 id="_pipe_commands"><a class="anchor" href="#_pipe_commands"></a>Pipe commands</h3>
<div class="paragraph">
<p>A pipe commands is a command that can consume and/or produce two type of objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <em>consumed</em> type: the type of the object that the command consumes</p>
</li>
<li>
<p>the <em>produced</em> type: the type of the object that the command produces</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Java generic declaration notation is used to denote the command capabilities: <code>&lt;C, P&gt;</code>, for instance
the <em>filter</em> is a <code>&lt;Map, Map&gt;</code> pipe.</p>
</div>
<div class="paragraph">
<p>Non pipe command consumes the <code>java.lang.Void</code> type and produces the <code>java.lang.Object</code> type: <code>&lt;Void, Object&gt;</code> . Such
commands will discard any input and can produce any kind of object.</p>
</div>
<div class="paragraph">
<p>The types consumed and produced by a command are documented in the <em>STREAM</em> section of its manual, let&#8217;s
read the <code>system propls</code> manual:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% man system propls
NAME
       system propls - list the vm system properties

SYNOPSIS
       system [-h | --help] propls [-f | --filter]

STREAM
       system propls &lt;java.lang.Void, java.util.Map&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       [-f | --filter]
           filter the property with a regular expression on their name</pre>
</div>
</div>
<div class="paragraph">
<p>The system propls_ command is a command that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>consumes no object (<code>Void</code>)</p>
</li>
<li>
<p>produces system properties as <code>&lt;java.util.Map&gt;</code> objects with two entries <em>NAME</em> and <em>VALUE</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Such command is often referred as a <em>producer</em> command as it produces a stream of objects that will
either be rendered in the shell or consumed by other commands.</p>
</div>
<div class="paragraph">
<p>Other pipe commands are usually <em>filters</em> because they consumes and produces objects, for instance
the <em>filter</em> command consumes <code>Map</code> objects and produces <code>Map</code> objects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% man filter
NAME
       filter - a filter for a stream of map

SYNOPSIS
       filter [-p | --pattern] [-h | --help]

STREAM
       filter &lt;java.util.Map, java.util.Map&gt;

PARAMETERS
       [-p | --pattern]
           format &lt;key&gt;:&lt;value&gt;

       [-h | --help]
           Display this help message</pre>
</div>
</div>
<div class="paragraph">
<p>This command consumers any map it receives and produces a subset of the maps based on the <em>pattern</em>, providing opportunity
for applying other filters down the road.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_pipeline"><a class="anchor" href="#_creating_a_pipeline"></a>Creating a pipeline</h3>
<div class="paragraph">
<p>This operation can be achieved with the pipe operator <code>|</code> and we can combine the <code>system propls</code> and
the <code>filter</code> command together:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% system propls | filter -p NAME:*Hosts

NAME               VALUE
---------------------------------------------------------
http.nonProxyHosts local|*.local|169.254/16|*.169.254/16
socksNonProxyHosts local|*.local|169.254/16|*.169.254/16
ftp.nonProxyHosts  local|*.local|169.254/16|*.169.254/16</pre>
</div>
</div>
<div class="paragraph">
<p>This work naturally because we have the same type <code>Map</code> shared by the two commands. When the type
does not match, several scenarios can happen, depending on the type declared by the piped command:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Void</code> : all objects are discarded</p>
</li>
<li>
<p>a super type of the produced type : the objects are consumed since they are acceptable by the command</p>
</li>
<li>
<p><code>org.crsh.text.Chunk</code> : the chunk is an object representing some textual data. In this case the object
<code>toString()</code> method is called and the returning string is transformed into a Chunk object</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_pipeline_commands"><a class="anchor" href="#_pipeline_commands"></a>Pipeline commands</h3>
<div class="paragraph">
<p>Here is a quick overview of various commands that can interract with the object pipe</p>
</div>
<div class="sect3">
<h4 id="_thread"><a class="anchor" href="#_thread"></a>Thread</h4>
<div class="paragraph">
<p>The <code>thread</code> command manipulates <code>java.lang.Thread</code> objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>thread ls</code> : produces threads</p>
</li>
<li>
<p><code>thread interrupt</code> : interrupts threads</p>
</li>
<li>
<p><code>thread stop</code> : stop threads</p>
</li>
<li>
<p><code>thread dump</code> : dump thread stacktrace</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_log_command"><a class="anchor" href="#_log_command"></a>Log command</h4>
<div class="paragraph">
<p>The <code>log</code> command manipulates <code>java.util.logging.Logger</code> objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>log ls</code> : produces logger objects</p>
</li>
<li>
<p><code>log send</code> : consumes logger object and sends a message</p>
</li>
<li>
<p><code>log tail</code> : produces log record objects</p>
</li>
<li>
<p><code>log set</code> : consumes logger object and sets the log level
+ <code>log add</code> : create new logger and produces them</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_jdbc_command"><a class="anchor" href="#_jdbc_command"></a>JDBC command</h4>
<div class="paragraph">
<p>The <code>jdbc</code> command manipulates tables as <code>java.util.Map</code> objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jdbc select</code> : execute a query and produce a stream of map</p>
</li>
<li>
<p><code>jdbc props</code> : display the connection properties as a single map</p>
</li>
<li>
<p><code>jdbc info</code> : describe the database as a stream of map</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_system_command"><a class="anchor" href="#_system_command"></a>System command</h4>
<div class="ulist">
<ul>
<li>
<p><code>system propls</code> : produces a stream of map with the current system properties</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_filter_command"><a class="anchor" href="#_filter_command"></a>Filter command</h4>
<div class="paragraph">
<p>Filter maps based on value patterns.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sort_command"><a class="anchor" href="#_sort_command"></a>Sort command</h4>
<div class="paragraph">
<p>Buffer a stream and sort it based on keys.</p>
</div>
</div>
<div class="sect3">
<h4 id="_jmx_command"><a class="anchor" href="#_jmx_command"></a>JMX command</h4>
<div class="paragraph">
<p>todo.</p>
</div>
</div>
<div class="sect3">
<h4 id="_egrep_command"><a class="anchor" href="#_egrep_command"></a>Egrep command</h4>
<div class="paragraph">
<p>todo.</p>
</div>
</div>
<div class="sect3">
<h4 id="_jvm_command"><a class="anchor" href="#_jvm_command"></a>Jvm command</h4>
<div class="paragraph">
<p>todo.</p>
</div>
</div>
</div>
</div>
</div>
<h1 id="_configuration_2" class="sect0"><a class="anchor" href="#_configuration_2"></a>Configuration</h1>
<div class="paragraph">
<p>This chapter explains the configuration of CRaSH, configuration aims to be as simple as possible
and is adapted to the mode running CRaSH.</p>
</div>
<div class="sect1">
<h2 id="_mount_point_configuration"><a class="anchor" href="#_mount_point_configuration"></a>Mount point configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CRaSH uses the file system for reading configuration files and discovering command source files. CRaSh uses a virtual
file system to be decoupled from the implementation, there are up to three implementations provided out of the box
(frameworks embedding CRaSH may add their own VFS implementation):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>file</em> : the actual file system of the operating system based on the <em>java.io.File</em> API</p>
</li>
<li>
<p><em>classpath</em> : uses the resources provided by the actual classpath</p>
</li>
<li>
<p><em>war</em> : the content of the web archive, available only when CRaSH is embedded in a web application</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>CRaSH can be configured for the <em>conf</em> and <em>cmd</em> mount points with a simple string that describes the VFS to be used. A <em>mount point</em>
is configured with a list of mounts, a mount being the name of a file system associated with a path in this file system.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>file:cmd/</em> : the <em>cmd</em> directory relative to the file system running the JVM</p>
</li>
<li>
<p><em>file:/cmd/</em> : the <em>cmd</em> directory relative to the root of the file system (so <em>/cmd</em>)</p>
</li>
<li>
<p><em>classpath:/crash/commands/</em> : any <em>/crash/command/</em> package found in the classpath</p>
</li>
<li>
<p><em>war:/WEB-INF/crash/commands/</em> : the folder <em>/WEB-INF/crash/commands</em> in the war file hosting CRaSH</p>
</li>
<li>
<p><em>classpath:/crash/commands/;war:/WEB-INF/crash/commands</em> : the aggregates of two entries</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default CRaSH provides an adapted mount point configuration for each mode, but you can customize it
according to your needs.</p>
</div>
<div class="sect2">
<h3 id="_configuring_the_standalone_mode"><a class="anchor" href="#_configuring_the_standalone_mode"></a>Configuring the standalone mode</h3>
<div class="paragraph">
<p>The mount point configurations of the standalone mode can be specified with command line options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <em>-cmd</em> option set the command moint point configuration, the default value being <em>classpath:/crash/commands/</em></p>
</li>
<li>
<p>the <em>-conf</em> option set the conf moint point configuration, the default value being <em>classpath:/crash/</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default behavior of the distribution extracts the content of these mount points in the <em>/cmd</em> and <em>/conf</em> folders
of the distribution. This behavior can be explained by looking at <em>crash.sh</em> and <em>crash.bat</em> startup scripts, they
uses the options <em>--cmd-folder</em> and <em>--conf-folder</em> to set this behavior.</p>
</div>
<div class="paragraph">
<p>Thanks to this default behavior, the commands and configurations files can be  easily modified. Without this feature, any modification
would imply to modify the jar files, which is not a viable option.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
removing these options from the startup scripts will configure CRaSH to uses the files from the jars directly.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_attach_mode"><a class="anchor" href="#_configuring_the_attach_mode"></a>Configuring the attach mode</h3>
<div class="paragraph">
<p>Same as standalone mode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_web_application_mode"><a class="anchor" href="#_configuring_the_web_application_mode"></a>Configuring the web application mode</h3>
<div class="paragraph">
<p>The servlet context parameters are used for configuring the paths:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="tag">&lt;web-app&gt;</span>
  ...
  <span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>crash.mountpointconfig.conf<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>war:/WEB-INF/crash/<span class="tag">&lt;/param-value&gt;</span>
  <span class="tag">&lt;/context-param&gt;</span>
  <span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>crash.mountpointconfig.cmd<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>war:/WEB-INF/crash/commands/<span class="tag">&lt;/param-value&gt;</span>
  <span class="tag">&lt;/context-param&gt;</span>
  ...
<span class="tag">&lt;/web-app&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this mode, the configs are subject to property interpolation based on the system properties of the JVM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="tag">&lt;web-app&gt;</span>
  ...
  <span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>crash.mountpointconfig.conf<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>${myconf}<span class="tag">&lt;/param-value&gt;</span>
  <span class="tag">&lt;/context-param&gt;</span>
  ...
<span class="tag">&lt;/web-app&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The interpolation format allows to specify a default value when the property cannot be resolved using Bash syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="tag">&lt;web-app&gt;</span>
  ...
  <span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>crash.mountpointconfig.conf<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>${myconf:-war:/WEB-INF/crash/commands/}<span class="tag">&lt;/param-value&gt;</span>
  <span class="tag">&lt;/context-param&gt;</span>
  ...
<span class="tag">&lt;/web-app&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Interpolation is only available for the web application mode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_spring_mode"><a class="anchor" href="#_configuring_the_spring_mode"></a>Configuring the spring mode</h3>
<div class="paragraph">
<p>The <code>org.crsh.spring.SpringWebBootstrap</code> bean exposes the <em>cmdMountPointConfig</em> and <em>confMountPointConfig</em> properties to configure it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml">  <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.crsh.spring.SpringWebBootstrap</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cmdMountPointConfig</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">war:/WEB-INF/crash/commands/</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">confMounPointConfig</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">war:/WEB-INF/crash/</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    ...
  <span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_properties"><a class="anchor" href="#_configuration_properties"></a>Configuration properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Properties play an important role in CRaSH configuration, they are configured differently according to the mode.</p>
</div>
<div class="sect2">
<h3 id="_configuring_the_standalone_or_attach_mode"><a class="anchor" href="#_configuring_the_standalone_or_attach_mode"></a>Configuring the standalone or attach mode</h3>
<div class="paragraph">
<p>In standalone or attach mode configuration can be in the <em>/conf/crash.properties</em> file or via the command line directly.</p>
</div>
<div class="paragraph">
<p>The <em>crash.properties</em> file does not exist by default and it is created at the first run, so you should run CRaSH
at least once to extract the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% crash</pre>
</div>
</div>
<div class="paragraph">
<p>You can also specify properties as a CRaSH command line argument with the <em>-p</em> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% crash -p crash.property_name=property_value</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_web_application_mode_2"><a class="anchor" href="#_configuring_the_web_application_mode_2"></a>Configuring the web application mode</h3>
<div class="paragraph">
<p>In the war file packaging, the configuration file can be found under <em>/WEB-INF/crash/crash.properties</em> file of the archive.
Configuration can be overriden by Java Virtual Machine system properties by using the same property name.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_properties_2"><a class="anchor" href="#_configuration_properties_2"></a>Configuration properties</h3>
<div class="sect3">
<h4 id="_changing_ssh_server_key"><a class="anchor" href="#_changing_ssh_server_key"></a>Changing SSH server key</h4>
<div class="paragraph">
<p>The key can be changed by replacing the file <em>WEB-INF/sshd/hostkey.pem</em>. Alternatively you can configure the server
to use an external file by using the <em>crash.ssh.keypath</em> parameter in the <em>crash.properties</em>. Uncomment the corresponding
property and change the path to the key file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#crash.ssh.keypath=/path/to/the/key/file</pre>
</div>
</div>
<div class="paragraph">
<p>If you specify an external file, you can also configure the server to generate it for you. In this case, the generation
will take place when someone first connects through SSH. The default behavior is <em>false</em>, i.e. not to generate.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#crash.ssh.keygen=false</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_changing_telnet_or_ssh_server_ports"><a class="anchor" href="#_changing_telnet_or_ssh_server_ports"></a>Changing telnet or SSH server ports</h4>
<div class="paragraph">
<p>The ports of the server are parameterized by the <em>crash.ssh.port</em> and <em>crash.telnet.port</em> parameters in the <em>crash.properties</em> file</p>
</div>
<div class="listingblock">
<div class="content">
<pre># SSH configuration
crash.ssh.port=2000</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre># Telnet configuration
crash.telnet.port=5000</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_changing_ssh_authentication_and_idle_timeouts"><a class="anchor" href="#_changing_ssh_authentication_and_idle_timeouts"></a>Changing SSH authentication and idle timeouts ===</h4>
<div class="paragraph">
<p>Default authentication and idle timeout of the SSH server are set to 10 minutes (600&#8217;000 ms). Both timeouts can be configured in milliseconds with the //crash.ssh.auth-timeout// and //crash.ssh.idle-timeout// parameters in the //crash.properties// file</p>
</div>
<div class="listingblock">
<div class="content">
<pre># SSH configuration 5 minutes = 5 * 60 * 1000 = 300'000
crash.ssh.auth-timeout=300000
crash.ssh.idle-timeout=300000</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_removing_telnet_or_ssh_access"><a class="anchor" href="#_removing_telnet_or_ssh_access"></a>Removing telnet or SSH access</h3>
<div class="ulist">
<ul>
<li>
<p>to remove the telnet access, remove the jar file in the <em>WEB-INF/lib/crsh.connectors.telnet-1.3.0-beta21.jar</em>.</p>
</li>
<li>
<p>to remove the SSH access, remove the jar file in the <em>WEB-INF/lib/crsh.connectors.ssh-1.3.0-beta21.jar</em>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_configuring_shell_default_message"><a class="anchor" href="#_configuring_shell_default_message"></a>Configuring shell default message</h4>
<div class="paragraph">
<p>The <em>/WEB-INF/crash/commands/base/login.groovy</em> file contains two closures that are evaluated each time a message is required</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>prompt</code> closure returns the prompt message</p>
</li>
<li>
<p>The <code>welcome</code> closure returns the welcome message</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Those closure can be customized to return different messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_authentication"><a class="anchor" href="#_configuring_authentication"></a>Configuring authentication</h4>
<div class="paragraph">
<p>Authentication is used by the SSH server when a user authenticates. Authentication interface is pluggable and has default
implementations. The <a href="#pluggable_auth">authentication chapter</a> explains how to write a custom authentication plugin, in this section we cover the
configuation of the authentication.</p>
</div>
<div class="paragraph">
<p>The configuration of the authentication plugin is done via property, this is necessary because several plugins can be detected
by CRaSH, and the plugin is selected via the property <em>crash.auth</em> that must match the authentication plugin name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>crash.auth=simple</pre>
</div>
</div>
<div class="paragraph">
<p>It can also take a comma-separated list of multiple authentication plugins, allowing to mix username/password and key
authentication. In this case plugins are tested in the order which they were specified:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>crash.auth=simple,key</pre>
</div>
</div>
<div class="paragraph">
<p>CRaSH comes out of the box with two authentication plugins.</p>
</div>
<div class="sect4">
<h5 id="_simple_authentication"><a class="anchor" href="#_simple_authentication"></a>Simple authentication</h5>
<div class="paragraph">
<p>Simple authentication provides a simple username/password authentication configured with the <em>crash.auth.simple.username</em> and
<em>crash.auth.simple.password</em> properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Authentication configuration
crash.auth=simple
crash.auth.simple.username=admin
crash.auth.simple.password=admin</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_jaas_authentation"><a class="anchor" href="#_jaas_authentation"></a>Jaas authentation</h5>
<div class="paragraph">
<p>Jaas authentication uses jaas to perform authentication configured with the <em>crash.auth.jaas.domain</em> property to define the
jaas domain to use when performing authentication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Authentication configuration
crash.auth=jaas
crash.auth.jaas.domain=my-domain</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_key_authentication"><a class="anchor" href="#_key_authentication"></a>Key authentication</h5>
<div class="paragraph">
<p>Key authentication relies on a set of authorized public keys to perform authentication configured with the
<em>crash.auth.key.path</em> property to specify the path of the keys. The property should point to a valid <em>.pem</em> file.
Obviously only a public key is required to be in the file, although it can also contain a private key (that will not be used).</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Authentication configuration
crash.auth=key
crash.auth.key.path=/Users/julien/.ssh/id_dsa.pem</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="_connectors" class="sect0"><a class="anchor" href="#_connectors"></a>Connectors</h1>
<div class="sect1">
<h2 id="_connectors_2"><a class="anchor" href="#_connectors_2"></a>Connectors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Connectors manages the connection of the client to the shell.</p>
</div>
<div class="sect2">
<h3 id="_jline_connector"><a class="anchor" href="#_jline_connector"></a>JLine connector</h3>
<div class="paragraph">
<p>todo</p>
</div>
</div>
<div class="sect2">
<h3 id="_ssh_connector"><a class="anchor" href="#_ssh_connector"></a>SSH connector</h3>
<div class="paragraph">
<p>todo</p>
</div>
</div>
<div class="sect2">
<h3 id="_telnet_connector"><a class="anchor" href="#_telnet_connector"></a>Telnet connector</h3>
<div class="paragraph">
<p>todo</p>
</div>
</div>
<div class="sect2">
<h3 id="_web_connector"><a class="anchor" href="#_web_connector"></a>Web connector</h3>
<div class="paragraph">
<p>The websocket provides connectivity from a web browser through WebSockets based on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The jQuery Terminal Emulator Plugin</p>
</li>
<li>
<p>a browser supporting WebSockets</p>
</li>
<li>
<p>a Java web server implementing the JSR 356 API</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_client_setup"><a class="anchor" href="#_client_setup"></a>Client setup</h4>
<div class="paragraph">
<p>CRaSH.js is the client side part of the connector, it is built on top of the <em>jQuery Terminal Emulator Plugin</em> and
 uses a client/server protocol for the shell connection.</p>
</div>
<div class="paragraph">
<p>The web page embedding <em>CRaSH.js</em> requires a few assets:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="html language-html"><span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">js/jquery-1.7.1.min.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">js/jquery.mousewheel-min.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">js/jquery.terminal-0.7.12.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">js/crash.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css/jquery.terminal.css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It can be setup in a few lines of JavaScript:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="javascript language-javascript">
<span class="comment">// Create web socket url</span>
<span class="keyword">var</span> path = window.location.pathname;
<span class="keyword">var</span> ctx = path.substring(<span class="integer">0</span>, path.indexOf(<span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>, <span class="integer">1</span>));
<span class="keyword">var</span> protocol;
<span class="keyword">if</span> (window.location.protocol == <span class="string"><span class="delimiter">'</span><span class="content">http:</span><span class="delimiter">'</span></span>) {
  protocol = <span class="string"><span class="delimiter">'</span><span class="content">ws</span><span class="delimiter">'</span></span>;
} <span class="keyword">else</span> {
  protocol = <span class="string"><span class="delimiter">'</span><span class="content">wss</span><span class="delimiter">'</span></span>;
}
<span class="keyword">var</span> url = protocol + <span class="string"><span class="delimiter">'</span><span class="content">://</span><span class="delimiter">'</span></span> + window.location.host + ctx + <span class="string"><span class="delimiter">'</span><span class="content">/crash</span><span class="delimiter">'</span></span>;

<span class="comment">// Connect to the server</span>
<span class="keyword">var</span> crash = <span class="keyword">new</span> CRaSH(<span class="predefined">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">#term_demo</span><span class="delimiter">'</span></span>), <span class="integer">1024</span>, <span class="integer">768</span>);
crash.connect(url);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_server_setup"><a class="anchor" href="#_server_setup"></a>Server setup</h4>
<div class="paragraph">
<p>Currently the WebSocket server uses the JSR 356 API, the connector is bootstrapped by the <code>org.crashub:crash.connectors.web</code> jar
that contains an annotation based endpoint bound to the <em>/crash</em> uri. Therefore the full uri is prefixed by the web application
context path in which the connector is deployed.</p>
</div>
<div class="paragraph">
<p>The <code>org.crashub:crash.connectors.web</code> jar contains also the assets for setting up the client side exposed automatically
when the jar is in the <em>WEB-INF/lib</em> of the web application (they are located in the <em>META-INF/resources</em> entry of the
jar). To activate the connector the property <code>crash.web.enabled</code> must be set to <code>true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_by_step_setup_recap"><a class="anchor" href="#_step_by_step_setup_recap"></a>Step by step setup (recap)</h4>
<div class="ulist">
<ul>
<li>
<p>put the <code>org.crashub:crash.connectors.web</code> jar in <em>WEB-INF/lib</em></p>
</li>
<li>
<p>add the <code>crash.web.enabled=true</code> in <em>WEB-INF/crash/crash.properties</em></p>
</li>
<li>
<p>create a web page in your war file that contains the assets listed previously</p>
</li>
<li>
<p>setup <em>CRaSH.js</em> in the page</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_securing_the_server"><a class="anchor" href="#_securing_the_server"></a>Securing the server</h4>
<div class="paragraph">
<p>todo</p>
</div>
</div>
</div>
</div>
</div>
<h1 id="developers" class="sect0"><a class="anchor" href="#developers"></a>Developers</h1>
<div class="sect1">
<h2 id="developping_commands"><a class="anchor" href="#developping_commands"></a>Developping commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Early CRaSH versions of CRaSH were targetting Groovy only, since version 1.3, CRaSH has become polyglot and
can work potentially with any language supported by the JVM. The Java language is now supported out of the box
along with Groovy.</p>
</div>
<div class="paragraph">
<p>In this section we will describe commands written in the Java or/and <a href="http://groovy.codehaus.org">Groovy</a> languages.
These two JVM languages share a lot and often valid Java code is also valid Groovy code (obviously the converse is not true).</p>
</div>
<div class="paragraph">
<p>Each command has a corresponding source ending with <em>.java</em> or <em>.groovy</em> file that contains a command class
that will be invoked by the shell. The files are usually located in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>/crash/commands/</em> path of jar files</p>
</li>
<li>
<p><em>cmd</em> directory for the standalone distribution</p>
</li>
<li>
<p><em>/WEB-INF/crash/commands</em> directory for the web archive deployment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When CRaSH is embedded by a runtime, CRaSH commands can be in other places, please refer to the documentation
of your runtime.</p>
</div>
<div class="paragraph">
<p>Commands can directly be placed in the commands directory; however they can also be placed in a sub directory of the
command directory, which is useful to group commands of the same kind.</p>
</div>
<div class="paragraph">
<p>In addition of that there are two special files called <em>login.groovy</em> and <em>logout.groovy</em> that are executed upon login
and logout of a user. They are useful to setup and cleanup things related to the current user session.</p>
</div>
<div class="paragraph">
<p>Commands are annotated classes, such class can be a <em>simple</em> command or a <em>git-style</em> command.
The <em>cli</em> framework provides conventions and a set of annotations for easily writing commands with
options and arguments in a very declarative manner.</p>
</div>
<div class="sect2">
<h3 id="_simple_command"><a class="anchor" href="#_simple_command"></a>Simple command</h3>
<div class="paragraph">
<p>Let&#8217;s study a simple class command example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">org.crsh.cli.Command</span>;
<span class="keyword">import</span> <span class="include">org.crsh.cli.Usage</span>;
<span class="keyword">import</span> <span class="include">org.crsh.cli.Option</span>;

<span class="type">class</span> <span class="class">date</span> {
  <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">show the current time</span><span class="delimiter">&quot;</span></span>)
  <span class="annotation">@Command</span>
  <span class="predefined-type">Object</span> main(
     <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">the time format</span><span class="delimiter">&quot;</span></span>)
     <span class="annotation">@Option</span>(names=[<span class="string"><span class="delimiter">&quot;</span><span class="content">f</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">format</span><span class="delimiter">&quot;</span></span>])
     <span class="predefined-type">String</span> format) {
    <span class="keyword">if</span> (format == <span class="predefined-constant">null</span>)
      format = <span class="string"><span class="delimiter">&quot;</span><span class="content">EEE MMM d HH:mm:ss z yyyy</span><span class="delimiter">&quot;</span></span>;
    <span class="keyword">def</span> date = <span class="keyword">new</span> <span class="predefined-type">Date</span>();
    <span class="keyword">return</span> date.format(format);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>date</em> command is pretty straightforward to understand:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>@Command</code> annotation declares the <code>main</code> method as a command</p>
</li>
<li>
<p>The command takes one optional <code>format</code> option declared by the <code>@Option</code> annotation</p>
</li>
<li>
<p>The <code>@Usage</code> annotation describes the usage of the command and its parameters</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>% date
Thu Apr 19 15:44:05 CEST 2012</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
the <code>main</code> name is a convention for simple commands. Another name would create a git-style
command instead.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>@Usage</code> annotation is important because it gives a human description of the command to the user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% date -h
usage: date [-h | --help] [-f | --format]

   [-h | --help]   command usage
   [-f | --format] the time format</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sub_commands"><a class="anchor" href="#_sub_commands"></a>Sub commands</h3>
<div class="paragraph">
<p>A class can hold several commands allowing a single file to group several commands, let&#8217;s study the JDBC command
structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">JDBC connection</span><span class="delimiter">&quot;</span></span>)
<span class="type">class</span> <span class="class">jdbc</span> {

  <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">connect to database with a JDBC connection string</span><span class="delimiter">&quot;</span></span>)
  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> connect(
          <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">The username</span><span class="delimiter">&quot;</span></span>)
          <span class="annotation">@Option</span>(names=[<span class="string"><span class="delimiter">&quot;</span><span class="content">u</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>])
          <span class="predefined-type">String</span> user,
          <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">The password</span><span class="delimiter">&quot;</span></span>)
          <span class="annotation">@Option</span>(names=[<span class="string"><span class="delimiter">&quot;</span><span class="content">p</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>])
          <span class="predefined-type">String</span> password,
          <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">The extra properties</span><span class="delimiter">&quot;</span></span>)
          <span class="annotation">@Option</span>(names=[<span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>])
          <span class="predefined-type">Properties</span> properties,
          <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">The connection string</span><span class="delimiter">&quot;</span></span>)
          <span class="annotation">@Argument</span>
          <span class="predefined-type">String</span> connectionString) {
     ...
  }

  <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">close the current connection</span><span class="delimiter">&quot;</span></span>)
  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> close() {
     ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can see that the class declares two commands <code>connect</code> and <code>close</code>, they are invoked this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% jdbc connect jdbc:derby:memory:EmbeddedDB;create=true
Connected to data base : jdbc:derby:memory:EmbeddedDB;create=true
% jdbc close
Connection closed</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_java_commands"><a class="anchor" href="#_java_commands"></a>Java commands</h3>
<div class="paragraph">
<p>The previous examples focused on the Groovy language, let&#8217;s see how we can do the same in Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="keyword">import</span> <span class="include">org.crsh.command</span>.*;
<span class="keyword">import</span> <span class="include">org.crsh.cli</span>.*;
<span class="keyword">import</span> <span class="include">java.util.Date</span>;
<span class="keyword">import</span> <span class="include">java.text.SimpleDateFormat</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">date</span> <span class="directive">extends</span> BaseCommand {
  <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">show the current time</span><span class="delimiter">&quot;</span></span>)
  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="predefined-type">Object</span> main(<span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">the time format</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@Option</span>(names={<span class="string"><span class="delimiter">&quot;</span><span class="content">f</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">format</span><span class="delimiter">&quot;</span></span>}) <span class="predefined-type">String</span> format) {
    <span class="keyword">if</span> (format == <span class="predefined-constant">null</span>)
      format = <span class="string"><span class="delimiter">&quot;</span><span class="content">EEE MMM d HH:mm:ss z yyyy</span><span class="delimiter">&quot;</span></span>;
    <span class="predefined-type">Date</span> date = <span class="keyword">new</span> <span class="predefined-type">Date</span>();
    <span class="predefined-type">SimpleDateFormat</span> formatter = <span class="keyword">new</span> <span class="predefined-type">SimpleDateFormat</span>(format);
    <span class="keyword">return</span> formatter.format(date);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Beside the fact that the Java version is a bit more verbose, let&#8217;s outline the noticeable differences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the command must extend the <code>org.crsh.command.BaseCommand</code> class: the main reason is that the <code>BaseCommand</code> class
provides contextual state managed by CRaSH, like the <code>context</code> or <code>out</code> fields. A Groovy command doesn&#8217;t need to inherit
explicitly, but CRaSH will make it extend this class using Groovy annotation processing.</p>
</li>
<li>
<p>the modifier <em>public</em> is required for the class declaration and the command method declarations</p>
</li>
<li>
<p>the option declaration uses curly braces (<em>names={"f","format"}</em>) instead of brackets (<em>names=["f","format"]</em>)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
if you need a more torough example of a Java command, you can read the source code of the <em>jmx</em> command
written in Java
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_command_line_annotations"><a class="anchor" href="#_command_line_annotations"></a>Command line annotations</h3>
<div class="paragraph">
<p>Let&#8217;s study the various annotations the <em>cli</em> framework provides for declaring a command.</p>
</div>
<div class="sect3">
<h4 id="__code_org_crsh_cli_command_code"><a class="anchor" href="#__code_org_crsh_cli_command_code"></a><code>@org.crsh.cli.Command</code></h4>
<div class="paragraph">
<p>Defines a command method, when using a simple command the method should be named <code>main</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="directive">public</span> <span class="type">class</span> <span class="class">sample</span> {

  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="type">void</span> main() {
    ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using this annotation automatically turns a class into a class command. <em>git-style</em> commands simply declares several methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="directive">public</span> <span class="type">class</span> <span class="class">sample</span> {

  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="type">void</span> sub1() {
    ...
  }

  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="type">void</span> sub2() {
    ...
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__code_org_crsh_cli_option_code"><a class="anchor" href="#__code_org_crsh_cli_option_code"></a><code>@org.crsh.cli.Option</code></h4>
<div class="paragraph">
<p>Declares an option, the <em>names</em> member must be specified: single letter name are turned into posix style option (single hyphen)
other names are turned into GNU style option (double hyphen). Several names can specified as aliases of the same option.
Options can be declared as method parameters or a class fields.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="directive">public</span> <span class="type">class</span> <span class="class">sample</span> {

  <span class="annotation">@Option</span>(names = [<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">opt1</span><span class="delimiter">&quot;</span></span>])
  <span class="directive">private</span> <span class="predefined-type">String</span> opt1;

  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="type">void</span> sub1(<span class="annotation">@Option</span>(names = [<span class="string"><span class="delimiter">&quot;</span><span class="content">opt2</span><span class="delimiter">&quot;</span></span>]) <span class="predefined-type">String</span> opt2) {
    ...
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; sample foo
&gt; sample -o foo
&gt; sample --opt1 foo sub1
&gt; sample sub1 --opt2 bar
&gt; sample --opt1 foo foo sub1 --opt2 bar</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__code_org_crsh_cli_argument_code"><a class="anchor" href="#__code_org_crsh_cli_argument_code"></a><code>@org.crsh.cli.Argument</code></h4>
<div class="paragraph">
<p>Declares an argument, this annotation should be used as method parameters only.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="directive">public</span> <span class="type">class</span> <span class="class">sample</span> {

  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="type">void</span> sub1(<span class="annotation">@Argument</span> <span class="predefined-type">String</span> arg) {
    ...
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; sample sub1
&gt; sample sub1 foo</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__code_org_crsh_cli_required_code"><a class="anchor" href="#__code_org_crsh_cli_required_code"></a><code>@org.crsh.cli.Required</code></h4>
<div class="paragraph">
<p>By default a parameter is optional, the <code>@Required</code> annotation can be used to force the user to specify a parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="directive">public</span> <span class="type">class</span> <span class="class">sample</span> {

  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="type">void</span> sub1(<span class="annotation">@Required</span> <span class="annotation">@Argument</span> <span class="predefined-type">String</span> arg) {
    ...
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__code_org_crsh_cli_usage_code_and_code_org_crsh_cli_man_code"><a class="anchor" href="#__code_org_crsh_cli_usage_code_and_code_org_crsh_cli_man_code"></a><code>@org.crsh.cli.Usage</code> and <code>@org.crsh.cli.Man</code></h4>
<div class="paragraph">
<p>Those annotations are useful for documenting commands help and manual:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">sample commands</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">sample</span> {

  <span class="annotation">@Command</span>
  <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">command description, begins with lower case</span><span class="delimiter">&quot;</span></span>)
  <span class="annotation">@Man</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Verbose descrition of the argument, it should begin with an upper case</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">public</span> <span class="type">void</span> sub1(
    <span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">argument description, begins with a lower case</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Man</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Verbose description of the argument, it should begin with an upper case</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Argument</span> <span class="predefined-type">String</span> arg) {
    ...
  }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Usage</code> specifies the usage, a short description, preferably starting with a lower case</p>
</li>
<li>
<p><code>@Man</code> provides the manual, a verbose description, preferably starting with an upper case</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_parameter_annotations_don_t_repeat_yourself"><a class="anchor" href="#_parameter_annotations_don_t_repeat_yourself"></a>Parameter annotations: Don&#8217;t Repeat Yourself</h4>
<div class="paragraph">
<p>When one or several commands uses the same parameter (option or argument), there is the opportunity to avoid repetition and
 define a custom annotation that can be used for declaring the parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="annotation">@Retention</span>(<span class="predefined-type">RetentionPolicy</span>.RUNTIME)
<span class="annotation">@Usage</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">A color</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Option</span>(names = <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="annotation">@interface</span> PathOption {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation can then be used instead for declaring an option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">mycommand</span> {
  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="type">void</span> foo(<span class="annotation">@ColorOption</span> <span class="predefined-type">String</span> color) {
    ...
  }
  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="type">void</span> bar(<span class="annotation">@ColorOption</span> <span class="predefined-type">String</span> color) {
    ...
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_parameter_multiplicity"><a class="anchor" href="#_parameter_multiplicity"></a>Parameter multiplicity</h3>
<div class="paragraph">
<p>The multiplicity is the number of values expected by a parameter, the multiplicity with simple types is always 1. The arity can
also be <em>several</em> when the <code>java.util.List</code> type is used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">sample</span> {

  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="type">void</span> sub1(<span class="annotation">@Option</span>(names = [<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>]) <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; opts) {
    ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The option can now accept several values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; sample sub1 -o foo -o bar</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_parameter_types"><a class="anchor" href="#_parameter_types"></a>Parameter types</h3>
<div class="paragraph">
<p>Option and argument parameters are represented by <em>simple</em> types. The string type is universal and will
work with any value provided by the user, other types will require parsing.</p>
</div>
<div class="sect3">
<h4 id="_builtin_types"><a class="anchor" href="#_builtin_types"></a>Builtin types</h4>
<div class="paragraph">
<p>CRaSH provides supports a few builtin simple types other than string:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Integer</code> type</p>
</li>
<li>
<p><code>Boolean</code> type</p>
</li>
<li>
<p><code>java.util.Properties</code> type</p>
</li>
<li>
<p><code>javax.management.ObjectName</code> type</p>
</li>
<li>
<p><code>java.io.File</code> type with file completion</p>
</li>
<li>
<p><code>Enum</code> types</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Boolean type is special because it does not need a value when combined with options. The option declaration is enough
to set the value to true:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="directive">public</span> <span class="type">class</span> <span class="class">sample</span> {

  <span class="annotation">@Command</span>
  <span class="directive">public</span> <span class="type">void</span> sub1(<span class="annotation">@Option</span>(names = [<span class="string"><span class="delimiter">&quot;</span><span class="content">o</span><span class="delimiter">&quot;</span></span>]) <span class="predefined-type">Boolean</span> opt) {
    ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The option will be true with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; sample sub1 -o</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_providing_your_own_type"><a class="anchor" href="#_providing_your_own_type"></a>Providing your own type</h4>
<div class="paragraph">
<p>Providing a custom type is possible, CRaSH uses the <code>ServiceLoader</code> discovery mechanism to discover custom types. Custom
types are implemented by a <code>org.crsh.cli.type.ValueType</code> subclass and implement its <code>parse</code> method:</p>
</div>
<div class="listingblock">
<div class="title">Our custom value type</div>
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">my</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomValueType</span> <span class="directive">extends</span> ValueType&lt;Custom&gt; {

  <span class="directive">public</span> CustomValueType() {
    <span class="local-variable">super</span>(Custom.class); <i class="conum" data-value="1"></i><b>(1)</b>
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> &lt;S <span class="directive">extends</span> Custom&gt; S parse(<span class="predefined-type">Class</span>&lt;S&gt; type, <span class="predefined-type">String</span> s) <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="keyword">return</span> type.cast(<span class="keyword">new</span> Custom(s)); <i class="conum" data-value="2"></i><b>(2)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The custom type is passed to the super class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The parse method should reutrn an instance of the type</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
The <code>parse</code> method uses the <code>&lt;S&gt;</code> generic type because the implementation of enum types has an effective
 type which is a subclass of the base enum type.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In order to make the custom type discovered by CRaSH, a file named <em>org.crsh.cli.type.ValueType</em> should be placed
in the <em>/META-INF/services/</em> directory of the jar containing the custom value type:</p>
</div>
<div class="listingblock">
<div class="title">The custom value type declared in META-INF/services/org.crsh.cli.type.ValueType</div>
<div class="content">
<pre>my.CustomValueType</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_style"><a class="anchor" href="#_adding_style"></a>Adding style</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CRaSH adds (since version 1.1) the support for colored text and text decoration. Each portion of text printed
 has three style attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Decoration</em>: bold, underline or blink, as the <code>org.crsh.text.Decoration</code> enum.</p>
</li>
<li>
<p><em>Foreground</em> color.</p>
</li>
<li>
<p><em>Background</em> color.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Available colors are grouped as the <code>org.crsh.text.Color</code> enum:</p>
</div>
<table class="tableblock frame-none grid-none" style="width:100%; ">
<colgroup>
<col style="width:50%;">
<col style="width:50%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p><span class="black">black</span></p>
</li>
<li>
<p><span class="red">red</span></p>
</li>
<li>
<p><span class="green">green</span></p>
</li>
<li>
<p><span class="yellow">yellow</span></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p><span class="blue">blue</span></p>
</li>
<li>
<p><span class="fuchsia">magenta</span></p>
</li>
<li>
<p><span class="aqua">cyan</span></p>
</li>
<li>
<p><span class="white black-background">white</span></p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>Decoration and colors can be applied with overloaded <code>print</code> and <code>println</code> methods provided by the <code>ShellPrinterWriter</code>.
This printer is available as the implicit <em>out</em> attribute or thanks to the <code><a href="#command_context">context</a>.getWriter()</code>
method.</p>
</div>
<div class="listingblock">
<div class="title">Decorating and coloring text</div>
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy">out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>, red); <i class="conum" data-value="1"></i><b>(1)</b>
out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>, red, blue); <i class="conum" data-value="2"></i><b>(2)</b>
out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>, underline, red, blue); <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Print hello in red color</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Print hello in red with a red blue</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Print hello in red underlined with a red blue</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The combination of the decoration, background and foreground colors is a <em>style</em> represented by the <code>org.crsh.text.Style</code>
object. Styles can be used like decoration and colors:</p>
</div>
<div class="listingblock">
<div class="title">Printing styled text</div>
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy">out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>, style(red)); <i class="conum" data-value="1"></i><b>(1)</b>
out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>, style(red, blue)); <i class="conum" data-value="2"></i><b>(2)</b>
out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>, style(underline, red, blue)); <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Print hello in red color</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Print hello in red with a red blue</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Print hello in red underlined with a red blue</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When using the print methods, the style will be used for the currently printed object. It is possible to change the
style permanently (until it is reset) using Groovy <em>leftshift</em> operator: <code>&lt;&lt;</code></p>
</div>
<div class="paragraph">
<p>By default the <code>&lt;&lt;</code> operator prints output on the console. The <code>ShellPrintWriter</code> overrides the operator to work
with color, decoration and styles:</p>
</div>
<div class="listingblock">
<div class="title">Styling with the leftshift operator</div>
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy">out &lt;&lt; red <i class="conum" data-value="1"></i><b>(1)</b>
out &lt;&lt; underline <i class="conum" data-value="2"></i><b>(2)</b>
out &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="3"></i><b>(3)</b>
out &lt;&lt; reset; <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set red foreground color</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set underline</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Print hello in underlined red</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Reset style</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Operators can also be combined on the same line providing a more compact syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy">out &lt;&lt; red &lt;&lt; underline &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span> &lt;&lt; reset</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy">out &lt;&lt; style(underline, red, blue) &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span> &lt;&lt; reset</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Throughout the examples we have used decoration, color and styles. CRaSH automatically imports those classes so
they can be used out of the box in any CRaSH command without requiring prior import.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="command_context"><a class="anchor" href="#command_context"></a>Command context</h2>
<div class="sectionbody">
<div class="paragraph">
<p>During the execution of a command, CRaSH provides a <em>context</em> for interacting with it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the property <em>context</em> is resolved to an instance of <code>org.crsh.command.InvocationContext</code></p>
</li>
<li>
<p>the invocation context class extends the <code>org.crsh.command.CommandContext</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s have a look at those types:</p>
</div>
<div class="listingblock">
<div class="title">The command context</div>
<div class="content">
<pre class="CodeRay"><code class="java language-java"></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>CommandContext</code> provides access to the shell session as a <code>Map&lt;String, Object&gt;</code>. Session attributes
can be accessed using this map, but they are also accessible as Groovy script properties. It means that writing such
code will be equivalent:</p>
</div>
<div class="listingblock">
<div class="title">Using shell session</div>
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy">context.session[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>] = <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>; <i class="conum" data-value="1"></i><b>(1)</b>
out.println(bar); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Bind the session attribute foo with the value bar</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The bar is resolved as an session attribute by Groovy</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>CommandContext</code> provides also access to the shell attributes as a <code>Map&lt;String, Object&gt;</code>. Context attributes
are useful to interact with object shared globally by the CRaSH environment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When embedded in a web application context, attributes resolves to servlet context attributes.</p>
</li>
<li>
<p>When embedded in Spring context, attributes resolve to Spring objects:</p>
<div class="ulist">
<ul>
<li>
<p><em>attributes.factory</em> returns the Spring factory</p>
</li>
<li>
<p><em>attributes.beans</em> returns Spring beans, for example <em>attribute.beans.telnet</em> returns the <em>telnet</em> bean</p>
</li>
</ul>
</div>
</li>
<li>
<p>When attached to a virtual machine, the context attributes has only a single <code>instrumentation</code> entry
that is the <code>java.lang.instrument.Instrumentation</code> instance obtained when attaching to a virtual machine.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Obtaining a Spring bean</div>
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="keyword">def</span> bean = context.attributes.beans[<span class="string"><span class="delimiter">&quot;</span><span class="content">TheBean</span><span class="delimiter">&quot;</span></span>];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s examine the <code>InvocationContext</code> that extends the <code>CommandContext</code>:</p>
</div>
<div class="listingblock">
<div class="title">The invocation context</div>
<div class="content">
<pre class="CodeRay"><code class="java language-java"></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>PrintWriter</code> object is the command output, it can be used also via the <em>out</em> property in Groovy scripts:</p>
</div>
<div class="listingblock">
<div class="title">Printing on the shell</div>
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy">context.writer.print(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>
out.print(<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Printing using the context writer</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Printing using the <em>out</em></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>readLine</code> method can be used to get interactive information from the user during the execution of a command.</p>
</div>
<div class="listingblock">
<div class="title">Reading on the console</div>
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="keyword">def</span> age = context.readLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">How old are you?</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">false</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally the <code>isPiped</code>, <code>consume</code> and <code>produce</code> methods are used when writing commands that exchange objects via
the pipe mechanism.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_object_pipeline"><a class="anchor" href="#_object_pipeline"></a>Object pipeline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the most powerful feature of CRaSH is the object pipeline. CRaSH commands can consume and produce objects
allowing the creation of object pipelines by combining commands. Writing such commands is very easy, in fact
<strong>any</strong> CRaSH command can be combined in a pipe. Indeed a command that merely prints text, is a command that
produces character data in the pipe.</p>
</div>
<div class="sect2">
<h3 id="_producer_commands"><a class="anchor" href="#_producer_commands"></a>Producer commands</h3>
<div class="paragraph">
<p>Until now we have seen how to use annotations of the <em>cli</em> framework to create commands. The logic of
this kind of command is executed in <code>@Command</code> annotated methods and it produces character data either by
writing text to the output or by returning a string. Such command is called a <em>producer</em> command because
it creates a stream of data but does not consume anything. Producer commands can produce other objects
than text.</p>
</div>
<div class="paragraph">
<p>Since CRaSH 1.3 the man page of a command gives details about the object it can consume and produce, let&#8217;s
look at the man page of the <em>env</em> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% man env
NAME
       env - display the term env

SYNOPSIS
       env [-h | --help]

STREAM
       env &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message</pre>
</div>
</div>
<div class="paragraph">
<p>The <em>STREAM</em> section tells us that the <em>env</em> commands consumes the <code>Void</code> type and produces the <code>Object</code>
type. In fact by default any command is a producer command that can produce any object (<code>&lt;java.lang.Object&gt;</code>) and consume
none (<code>&lt;java.lang.Void&gt;</code>).</p>
</div>
<div class="paragraph">
<p>Producing any object is easy, the command just need to return it, let&#8217;s see an example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="annotation">@Command</span>
<span class="predefined-type">Map</span> main() {
  <span class="keyword">return</span>  <span class="predefined-type">Thread</span>.currentThread()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s print its man page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% man test
NAME
       test

SYNOPSIS
       test [-h | --help]

STREAM
       test &lt;java.lang.Void, java.lang.Thread&gt;

PARAMETERS
       [-h | --help]
           Display this help message</pre>
</div>
</div>
<div class="paragraph">
<p>If you invoke you might expect to read <code>Thread[ppool-1-thread-10,5,main]</code> returned by the <code>Thread#toString()</code> method,
the result is actually quite different:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% test
ID      NAME                   GROUP           PRIORI STATE   %CPU    TIME    INTERR DAEMON
37      pool-1-thread-10       main            5      RUNNABL 100     0:0     false  false</pre>
</div>
</div>
<div class="paragraph">
<p>The explanation is simple: the thread object is sent in the pipe and hits the end of the pipe. At
this moment CRaSH render those objects, it can of course use the <code>toString()</code> method however
specific renderers can be used to produce a more visual result for the user. Thread objects have
a dedicated render that displays a nice table showing threads.</p>
</div>
<div class="paragraph">
<p>This example shows that it is easy to produce an object in the pipe, however it produces a single
object instance. Producing a stream of object can be achieved via the <code>InvocationContext</code> object. A
command method can declare an <code>InvocationContext</code> among its argument list and use the <code>provide</code> method
during the invocation of the method</p>
</div>
<div class="listingblock">
<div class="title">The threads command list all the threads of the virtual machine</div>
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">threads</span> {
  <span class="annotation">@Command</span>
  <span class="type">void</span> main(InvocationContext&lt;<span class="predefined-type">Thread</span>&gt; context) { <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="keyword">for</span> (<span class="predefined-type">Thread</span> thread : <span class="predefined-type">Thread</span>.getAllStackTraces().keySet()) {
      context.provide(thread); <i class="conum" data-value="2"></i><b>(2)</b>
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>declares &lt;Thread&gt; as produced type</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>send a thread object in the pipe</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_pipe_commands_2"><a class="anchor" href="#_pipe_commands_2"></a>Pipe commands</h3>
<div class="paragraph">
<p>A pipe command declares a consumed type other than the <code>java.lang.Void</code> type. Developing a pipe command
is easy although it is a bit different from producer commands.</p>
</div>
<div class="paragraph">
<p>Here is an example of a simple pipe:</p>
</div>
<div class="listingblock">
<div class="title">The daemons command filters the thread stream to retain on the daemons</div>
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">org.crsh.command.Pipe</span>;

<span class="type">class</span> <span class="class">daemons</span> {
  <span class="annotation">@Command</span>
  <span class="predefined-type">Pipe</span>&lt;<span class="predefined-type">Thread</span>, <span class="predefined-type">Thread</span>&gt; main() {
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="predefined-type">Pipe</span>&lt;<span class="predefined-type">Thread</span>, <span class="predefined-type">Thread</span>&gt;() {    <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="directive">public</span> <span class="type">void</span> provide(<span class="predefined-type">Thread</span> thread) { <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">if</span> (thread.isDaemon()) {
          context.provide(thread);         <i class="conum" data-value="2"></i><b>(2)</b>
        }
      }
    };
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A pipe command is a factory for <code>org.crsh.command.Pipe</code> objects</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>provide</code> method is invoked for each object of the stream</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>context</code> object is an <code>InvocationContext</code> used to produce daemon threads</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A pipe command is thus a factory for <code>org.crsh.command.Pipe</code> objects, the pipe declaration specifies
the type consumed and produced by the pipe, in this case the daemon command declares <code>Thread</code> for both
types.</p>
</div>
<div class="paragraph">
<p>The <code>provide</code> callback is invoked for each object of the stream, during this invocation, the pipe implementation
can invoke the <code>context</code> provide method to produce its objects. As our command filters threads to retain only the
daemon threads, this is done only for daemon threads.</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s continue our tour and write a pipe command that counts the number of objects in a pipe. This example
is interesting because it demonstrates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>different consumed and produced types can be used</p>
</li>
<li>
<p>objects can be produced in the close method of the pipe</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">org.crsh.command.Pipe</span>;

<span class="type">class</span> <span class="class">count</span> {
  <span class="annotation">@Command</span>
  <span class="predefined-type">Pipe</span>&lt;<span class="predefined-type">Object</span>, <span class="predefined-type">Integer</span>&gt; main() {
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="predefined-type">Pipe</span>&lt;<span class="predefined-type">Object</span>, <span class="predefined-type">Integer</span>&gt;() {
      <span class="type">int</span> value = <span class="integer">0</span>;
      <span class="directive">public</span> <span class="type">void</span> provide(<span class="predefined-type">Object</span> o) {
        value++; <i class="conum" data-value="1"></i><b>(1)</b>
      }
      <span class="directive">public</span> <span class="type">void</span> close() {
        context.provide(value); <i class="conum" data-value="2"></i><b>(2)</b>
      }
    };
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>count the number of consumed objects</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>before closing we produce the count value</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we can combine those three commands to count the number of daemon threads:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% threads | daemons | count
6</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_command_interruption"><a class="anchor" href="#_command_interruption"></a>Command interruption</h2>
<div class="sectionbody">
<div class="paragraph">
<p>During the execution of a command, sometimes the user wants to interrupt the execution of the
command, specially for long lived commands. The <em>ctrl-c</em> keystroke in the shell will trigger
a thread interruption during the execution a command.</p>
</div>
<div class="paragraph">
<p>If you command thread is in the waiting state, an <code>InterruptedException</code> will be thrown otherwise
  you can check the current thread status with <code>Thread.interrupted()</code> static method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">clock</span> {
  <span class="annotation">@Command</span>
  <span class="predefined-type">Object</span> main(InvocationContext&lt;<span class="predefined-type">Date</span>&gt; context) {
    <span class="keyword">while</span> (!<span class="predefined-type">Thread</span>.interrupted()) { <i class="conum" data-value="1"></i><b>(1)</b>
       context.provide(<span class="keyword">new</span> <span class="predefined-type">Date</span>());
       context.flush();
       <span class="keyword">try</span> {
         <span class="predefined-type">Thread</span>.sleep(<span class="integer">1000</span>); <i class="conum" data-value="2"></i><b>(2)</b>
       } <span class="keyword">catch</span> (<span class="exception">InterruptedException</span> e) {
         <span class="predefined-type">Thread</span>.currentThread().interrupt(); <i class="conum" data-value="3"></i><b>(3)</b>
         <span class="keyword">break</span>;
       }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>check the thread has not been interrupted</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>sleep for 1 second</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the command was interrupted while sleeping</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This producer command produces the current time in the object stream until the user interrupts
it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% clock
Tue May 06 22:27:55 CEST 2014Tue May 06 22:27:56 CEST 2014Tue May 06 22:27:57 CEST 2014Tue May 06 22:27:58 CEST 2014Tue May 06 22:27:59 CEST 2014Tue May 06 22:28:00 CEST 2014Tue May 06 22:28:01 CEST 2014Tue May 06 22:28:02 CEST 2014Tue May 06 22:28:03 CEST 2014
^C

%</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keyboard_interactions"><a class="anchor" href="#_keyboard_interactions"></a>Keyboard interactions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A command can interact with the keyboard in two manners, either by reading a line (synchronous api) or by
reacting to keyboard events (asynchronous api).</p>
</div>
<div class="sect2">
<h3 id="_reading_a_line"><a class="anchor" href="#_reading_a_line"></a>Reading a line</h3>
<div class="paragraph">
<p>When a command needs to interact with they user to get input, it can use the <code>InvocationContext#readLine()</code> method to
prompt the user for a line of text.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="predefined-type">String</span> line = context.readLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">tell me something</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">false</span>);
<span class="keyword">if</span> (line != <span class="predefined-constant">null</span>) {
  out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">You wrote </span><span class="delimiter">&quot;</span></span> + line);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The returned line may be null sometimes so the command should handle this case properly.
For instance, if the user intertupts the command while reading the line, then the line is null. Reading
 a line is synchronous and blocking until the users hits the <em>enter</em> key or interrupts the command.</p>
</div>
</div>
<div class="sect2">
<h3 id="_keyboard_events"><a class="anchor" href="#_keyboard_events"></a>Keyboard events</h3>
<div class="paragraph">
<p>A command can also react to keyboard events by implementing the <code>org.crsh.console.KeyHandler</code> interface. Our
previous clock example could be rewritten using this API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">org.crsh.console.KeyHandler</span>;
<span class="keyword">import</span> <span class="include">org.crsh.console.KeyType</span>;

<span class="type">class</span> <span class="class">clock</span> <span class="directive">implements</span> KeyHandler {

  <span class="directive">final</span> <span class="predefined-type">AtomicBoolean</span> done = <span class="keyword">new</span> <span class="predefined-type">AtomicBoolean</span>(<span class="predefined-constant">false</span>);

  <span class="annotation">@Override</span>
  <span class="type">void</span> handle(KeyType type, <span class="type">int</span><span class="type">[]</span> sequence) {
    <span class="keyword">if</span> (type == KeyType.q) {
      done.set(<span class="predefined-constant">true</span>);
    }
  }

  <span class="annotation">@Command</span>
  <span class="predefined-type">Object</span> main(InvocationContext&lt;<span class="predefined-type">Date</span>&gt; context) {
    <span class="keyword">while</span> (!done.get()) {
       context.provide(<span class="keyword">new</span> <span class="predefined-type">Date</span>());
       context.flush();
       <span class="keyword">try</span> {
         <span class="predefined-type">Thread</span>.sleep(<span class="integer">1000</span>);
       } <span class="keyword">catch</span> (<span class="exception">InterruptedException</span> e) {
       }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command will stream until the user hits the <em>q</em> key.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_renderers"><a class="anchor" href="#_renderers"></a>Renderers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We studied previously CRaSH object pipe: command push objects into the stream, when an object hits the
end of the pipeline, it is printed on the user console. For character data, printing it an obvious operation.
For other objects, the <em>renderer</em> api can provide customized textual representation of the object.</p>
</div>
<div class="paragraph">
<p>The <em>renderer</em> api makes also writing command easier: a command can focus on the business part and just
send objects in the pipe, if there is an appropriate renderer for it, it will be displayed nicely:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">developers</span> {
  <span class="annotation">@Command</span>
  <span class="type">void</span> main(InvocationContext&lt;<span class="predefined-type">Map</span>&gt; context) {
    context.provide([<span class="key">firstName</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Julien</span><span class="delimiter">&quot;</span></span>,<span class="key">lastName</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Viet</span><span class="delimiter">&quot;</span></span>]);
    context.provide([<span class="key">firstName</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Alain</span><span class="delimiter">&quot;</span></span>,<span class="key">lastName</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Defrance</span><span class="delimiter">&quot;</span></span>]);
    context.provide([<span class="key">firstName</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Arnaud</span><span class="delimiter">&quot;</span></span>,<span class="key">lastName</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Heritier</span><span class="delimiter">&quot;</span></span>]);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>map</em> renderer will format these three maps as a table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% date
firstName lastName
------------------
Julien    Viet
Alain     Defrance
Arnaud    Heritier</pre>
</div>
</div>
<div class="sect2">
<h3 id="_predefined_renderers"><a class="anchor" href="#_predefined_renderers"></a>Predefined renderers</h3>
<div class="paragraph">
<p>CRaSH provides a few renderers out of the box:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>LoggerRenderer : <code>java.util.logging.Logger</code> objects</p>
</li>
<li>
<p>LogRecordRenderer : <code>java.util.logging.LogRecord</code> objects</p>
</li>
<li>
<p>ThreadRenderer : <code>java.lang.Thread</code> objects</p>
</li>
<li>
<p>MapRenderer : <code>java.util.Map</code> objects</p>
</li>
<li>
<p>MemoryUsageRenderer : <code>java.lang.management.MemoryUsage</code> objects</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_a_renderer"><a class="anchor" href="#_implementing_a_renderer"></a>Implementing a renderer</h3>
<div class="paragraph">
<p>Renderer implementation is not covered yet.</p>
</div>
</div>
</div>
</div>
<h1 id="_groovy_guide" class="sect0"><a class="anchor" href="#_groovy_guide"></a>Groovy guide</h1>
<div class="paragraph">
<p>This section teaches about advanced Groovy usage in CRaSH.</p>
</div>
<div class="sect1">
<h2 id="commands_as_script"><a class="anchor" href="#commands_as_script"></a>Commands as a script</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="#developers">Developers</a> covered how to write a CRaSH command as a Groovy/Java class. The Groovy language
also supports simple scripts. A simple script that returns a string is a valid command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World</span><span class="delimiter">&quot;</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>out</code> implicit variable can be used to send a message to the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java">out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>It can be even Groovier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy">out &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_inter_command_api"><a class="anchor" href="#_inter_command_api"></a>Inter command API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy provides powerful support for invoking nested commands, allowing to reuse any CRaSH
commands inside your commands, obviously such nested commands don&#8217;t have be Groovy commands.
Let&#8217;s study how a command can reuse existing commands:</p>
</div>
<div class="listingblock">
<div class="title">dbscript.groovy</div>
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy">jdbc.connect <span class="key">username</span>:root, <span class="key">password</span>:crash, <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:derby:memory:EmbeddedDB;create=true</span><span class="delimiter">&quot;</span></span>
jdbc.execute <span class="string"><span class="delimiter">&quot;</span><span class="content">create table derbyDB(num int, addr varchar(40))</span><span class="delimiter">&quot;</span></span>
jdbc.execute <span class="string"><span class="delimiter">&quot;</span><span class="content">insert into derbyDB values (1956,'Webster St.')</span><span class="delimiter">&quot;</span></span>
jdbc.execute <span class="string"><span class="delimiter">&quot;</span><span class="content">insert into derbyDB values (1910,'Union St.')</span><span class="delimiter">&quot;</span></span>
jdbc.execute <span class="string"><span class="delimiter">&quot;</span><span class="content">select * from derbyDb</span><span class="delimiter">&quot;</span></span>
jdbc.close</code></pre>
</div>
</div>
<div class="paragraph">
<p>This script is written in Groovy and use Groovy DSL capabilities, the first statement can be
analyzed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>jdbc.connect</code> statement is decomposed into two steps</p>
<div class="ulist">
<ul>
<li>
<p>the <code>jdbc</code> is resolved as the command itself</p>
</li>
<li>
<p>the <code>connect</code> invokes the connect command</p>
</li>
</ul>
</div>
</li>
<li>
<p>the <code>username</code> and <code>password</code> are considered as command options</p>
</li>
<li>
<p>the SQL statement <code>"jdbc:derby:memory:EmbeddedDB;create=true"</code> is the main argument of the command</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This syntax is quite powerful (and explained more in depth in <a href="#groovy_repl">[groovy_repl]</a> section)
is equivalent to the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% jdbc connect --username root --password crash jdbc:derby:memory:EmbeddedDB;create=true</pre>
</div>
</div>
<div class="paragraph">
<p>The rest of the script is fairly easy to understand, here is the output of the script execution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% dbscript
Connected to data base : jdbc:derby:memory:EmbeddedDB;create=true
Query executed successfully
Query executed successfully
Query executed successfully
NUM                  ADDR
1956                 Webster St.
1910                 Union St.
Connection closed</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_groovy_repl"><a class="anchor" href="#_the_groovy_repl"></a>The Groovy REPL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <em>Readevalprint loop</em> known as <em>REPL</em> is the interactive evaluation of CRaSH. Since CRaSH 1.3, the REPL evaluation
can be switch to the Groovy language.</p>
</div>
<div class="paragraph">
<p>The Groovy REPL is switched via the <em>repl</em> directive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% repl groovy
Using repl groovy</pre>
</div>
</div>
<div class="sect2">
<h3 id="_evaluating_commands"><a class="anchor" href="#_evaluating_commands"></a>Evaluating commands</h3>
<div class="paragraph">
<p>Simple commands are invoked by calling them just like a function:</p>
</div>
<div class="listingblock">
<div class="title">Invoking a simple command the Groovy way</div>
<div class="content">
<pre>% repl groovy
Using repl groovy
% help()
Try one of these commands with the -h or --help switch:

NAME          DESCRIPTION
cls           clear screen
egrep         search file(s) for lines that match a pattern
env           display the term env
...</pre>
</div>
</div>
<div class="paragraph">
<p>Typing a command name evalutes to a Groovy closure, allowing to call the command just like a function.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
to switch back to the script REPL, you need to use the Groovy syntax <code>repl("script")</code> as <code>repl</code>
is a command itself
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Typing a command evaluates to a closure</div>
<div class="content">
<pre>% cmd = help
help
% cmd()</pre>
</div>
</div>
<div class="paragraph">
<p>Sub commands can be invoked by resolving a new closure from the initial command:</p>
</div>
<div class="listingblock">
<div class="title">Invoking a sub command the Groovy way</div>
<div class="content">
<pre>% thread.ls()</pre>
</div>
</div>
<div class="paragraph">
<p>Which is equivalent to</p>
</div>
<div class="listingblock">
<div class="title">Sub commands are also evaluated to closures</div>
<div class="content">
<pre>% cmd = thread
thread
% cmd2 = cmd.ls
thread.ls
% cmd2()
...</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_passing_options_and_arguments"><a class="anchor" href="#_passing_options_and_arguments"></a>Passing options and arguments</h3>
<div class="paragraph">
<p>Command options and command arguments are passed as invocation parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>options are used as a map or named parameters</p>
</li>
<li>
<p>arguments are the other invocation parameters</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Passing options as named parameters</div>
<div class="content">
<pre>% thread(h:true)
usage: thread COMMAND [ARGS]

The most commonly used thread commands are:
   stop             stop vm threads
   interrupt        interrupt vm threads
   top              thread top
   ls               list the vm threads
   dump             dump vm threads

% thread.ls(h:true)
usage: thread ls [-n | --name] [-g | --group] [-s | --state]

   [-n | --name]  Filter the threads with a glob expression on their name
   [-g | --group] Filter the threads with a glob expression on their group
   [-s | --state] Filter the threads by their status (new,runnable,blocked,waiting,timed_waiting,terminated)</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Passing an argument</div>
<div class="content">
<pre>% system.propget("file.encoding")
UTF-8</pre>
</div>
</div>
<div class="paragraph">
<p>Passing options and arguments at the same time is easy to do, however the options should be the first method parameters:</p>
</div>
<div class="listingblock">
<div class="title">Passing an options and arguments</div>
<div class="content">
<pre>% log.send(m:"hello", "the.category")
Aug 12, 2013 11:22:50 AM org.codehaus.groovy.reflection.CachedMethod invoke
INFO: hello</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_options_and_arguments_binding"><a class="anchor" href="#_options_and_arguments_binding"></a>Options and arguments binding</h3>
<div class="paragraph">
<p>Options and arguments can also be bound on a closure:</p>
</div>
<div class="listingblock">
<div class="title">Binding options to a command</div>
<div class="content">
<pre>% (thread.ls { h=true })()
...
% cmd = thread.ls { h=true }
thread.ls { h=true }
% cmd();
...</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Binding arguments to a command</div>
<div class="content">
<pre>% (system.propget { "file.encoding" })()
...
% cmd = system.propget { "file.encoding" }
system.propget { ["file.encoding"] }
% cmd();
...</pre>
</div>
</div>
<div class="paragraph">
<p>Of course it is possible to bind options and arguments too, the arguments needs to be passed as last parameters:</p>
</div>
<div class="listingblock">
<div class="title">Passing an options and arguments</div>
<div class="content">
<pre>% (log.send { m="hello"; "the category" })()
...
% cmd = log.send { m="hello"; "the category" }
log.send { m="hello"; ["the category"] }
% cmd()
...</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_command_pipeline_2"><a class="anchor" href="#_command_pipeline_2"></a>Command pipeline</h3>
<div class="paragraph">
<p>The object pipeline can be used in the Groovy REPL using the <code>|</code> (pipe) operator. When a command closure is combined with a
 pipe, it returns a new closure that will invoke the pipeline construction.</p>
</div>
<div class="listingblock">
<div class="title">Assembling a command pipe</div>
<div class="content">
<pre>% (system.propls | egrep { "java.*" })()
java.runtime.name                        Java(TM) SE Runtime Environment
java.vm.version                          23.7-b01
java.vm.vendor                           Oracle Corporation
...
% cmd = system.propls | egrep { "java.*" }
system.propls | egrep { ["java.*"] }
% cmd()
...</pre>
</div>
</div>
<div class="paragraph">
<p>A pipeline can also contain Groovy closures in addition of the existing commands</p>
</div>
<div class="listingblock">
<div class="title">Using a Groovy closure in a pipe</div>
<div class="content">
<pre>% (thread.ls | { Thread thread -&gt; [id:thread.id, name:thread.name] })()
id name
------------------------------------
2  Reference Handler
3  Finalizer
...
% cmd = thread.ls | { Thread thread -&gt; [id:thread.id, name:thread.name] }
thread.ls | Script14$_run_closure1@47da4d19
% cmd()
...</pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the closure takes the threads argument and transforms them to a serie of maps that are displayed then as a table
by CRaSH.</p>
</div>
</div>
</div>
</div>
<h1 id="_extending_crash" class="sect0"><a class="anchor" href="#_extending_crash"></a>Extending CRaSH</h1>
<div class="sect1">
<h2 id="_embedding_crash"><a class="anchor" href="#_embedding_crash"></a>Embedding CRaSH</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The chapter <a href="#running_crash">Running CRaSH</a> explains how to run CRaSH as a standalone or an embedded service. We will study in this section the technical
aspect of running application and show how CRaSH can be embedded in specific environments.</p>
</div>
<div class="paragraph">
<p>The root class for reusing CRaSH is the <code>org.crsh.plugin.PluginLifeCycle</code> class. This class is abstract and it cannot
be used directly, instead it should be subclasses for providing specific behavior for running CRaSH. There are several
subclasses using it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The standalone bootstrap with the <code>org.crsh.standalone.Bootstrap</code> class : designed for using CRaSH with a real
file system (i.e <code>java.io.File</code>). It defines a specific layout for locating resources (libraries, configuration and commands).</p>
</li>
<li>
<p>The embedded approaches</p>
<div class="ulist">
<ul>
<li>
<p><code>org.crsh.plugin.WebPluginLifeCycle</code> : uses a <code>javax.servlet.ServletContext</code></p>
</li>
<li>
<p><code>org.crsh.spring.SpringBootstrap</code> : embeds CRaSH as a Spring bean</p>
</li>
<li>
<p><code>org.crsh.spring.SpringWebBootstrap</code> : extends the <code>SpringBootstrap</code> and uses the existing <code>ServletContext</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="standalone_bootstrap"><a class="anchor" href="#standalone_bootstrap"></a>Standalone bootstrap</h3>
<div class="paragraph">
<p>The <code>org.crsh.standalone.Bootstrap</code> class is a generic class that can be used to embed the shell in your Java programs
Its usage is quite straighforward and configurable. The bootstrap is a coarse grained approach and it needs a bit of configuration for running:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>baseLoader</code> properties is the <code>java.lang.ClassLoader</code> used by CRaSH for loading plugins, resources or command sources (under the
<em>/crash/commands/</em> path. This property is not modifiable and must be provided when the bootstrap is instantiated.</p>
</li>
<li>
<p>The <code>config</code> properties provides the contextual properties used by CRaSH configuration such as <em>crash.vfs.refresh_period</em></p>
</li>
<li>
<p>The <code>attributes</code> property provides the contextual attributes used by CRaSH available at runtime via the <code>org.crsh.command.CommandContext</code>,
it is useful for providing objects to commands in a similar fashion to servlet context attributes</p>
</li>
<li>
<p>The <code>cmdPath</code> property is a list of <code>java.io.File</code> scanned by CRaSH for loading additional commands</p>
</li>
<li>
<p>The <code>confPath</code> property is a list of <code>java.io.File</code> scanned by CRaSH for loading configuration files</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s see an example on how to use it</p>
</div>
</div>
<div class="sect2">
<h3 id="_standalone_crash"><a class="anchor" href="#_standalone_crash"></a>Standalone CRaSH</h3>
<div class="paragraph">
<p>The standalone shell is a Java class configurable and runnable from the command line that is used by the standalone distribution. It is
built upon the <a href="#standalone_bootstrap">Standalone bootstrap</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pluggable_auth"><a class="anchor" href="#pluggable_auth"></a>Pluggable authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Creating a custom authentication mechanism is done by implementing a CRaSH plugin that provides an implementation of the <code>AuthenticationPlugin</code>
interface. Let&#8217;s study the <em>simple</em> authentication plugin implementation.</p>
</div>
<div class="paragraph">
<p>The <code>AuthenticationPlugin</code> is the interface to implement in order to integrate CRaSH with an authentication mechanism:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"></code></pre>
</div>
</div>
<div class="paragraph">
<p>The integration as a CRaSH plugin mandates to extend the class <code>CRaSHPlugin</code> with the generic type <code>AuthenticationPlugin</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">SimpleAuthenticationPlugin</span> <span class="directive">extends</span>
    CRaSHPlugin&lt;AuthenticationPlugin&gt; <span class="directive">implements</span>
    AuthenticationPlugin {


  ...

}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>getName()</code> method returns the <em>simple</em> value that matchs the <em>crash.auth</em> configuration property</p>
</li>
<li>
<p>The <code>getImplementation()</code> method returns the object that implements the <code>AuthenticationPlugin</code> class, this method
is implemented from the <code>CRaSHPlugin</code> abstract class, but in our case it
simply returns <code>this</code> because <code>SimpleAuthenticationPlugin</code> is directly the implementation class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now let&#8217;s study how the plugin retrieves the configuration properties <code>crash.auth.simple.username</code> and <code>crash.auth.simple.password</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">SimpleAuthenticationPlugin</span> <span class="directive">extends</span>
    CRaSHPlugin&lt;AuthenticationPlugin&gt; <span class="directive">implements</span>
    AuthenticationPlugin {


  ...

}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>createConfigurationCapabilities()</code> method returns the constants <code>SIMPLE_USERNAME</code> and <code>SIMPLE_PASSWORD</code> that defines
the configuration properties that the plugin uses</p>
</li>
<li>
<p>The <code>init()</code> method is invoked by CRaSH before the plugin will be used, at this moment, the configuration properties are retrieved
from the plugin context with the method <code>getContext()</code> available in the <code>CRaSHPlugin</code> base class</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally the plugin needs to provide the <code>authenticate()</code> method that implement the authentication logic:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"></code></pre>
</div>
</div>
<div class="paragraph">
<p>The logic is straightforward with an equality check of the username and password.</p>
</div>
<div class="paragraph">
<p>Last but not least we must declare our plugin to make it recognized by CRaSH, this is achieved thanks to the <code>java.util.ServiceLoader</code>
class. CRaSH uses the <code>ServiceLoader</code> for loading plugins and the loader needs a file to be present in the jar file containing
the class under the name <code>META-INF/services/org.crsh.plugin.CRaSHPlugin</code> containing the class name of the plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.crsh.auth.SimpleAuthenticationPlugin</pre>
</div>
</div>
<div class="paragraph">
<p>When all of this is done, the plugin and its service loader descriptor must be packaged in a jar file and available on the classpath
of CRaSH.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
You can learn more about the <code>java.util.ServiceLoader</code> by looking at the online <a href="http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html">javadoc</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<h1 id="_mail_plugin" class="sect0"><a class="anchor" href="#_mail_plugin"></a>Mail plugin</h1>
<div class="paragraph">
<p>The mail plugin configures an email client for CRaSH. This email client can be used as a service or via the <code>mail</code>
command.</p>
</div>
<div class="sect1">
<h2 id="_deployment"><a class="anchor" href="#_deployment"></a>Deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin consist of two jars:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the JavaMail jar <code>mail-1.4.jar</code></p>
</li>
<li>
<p>the plugin jar <code>crash.plugins.mail-1.3.0-beta21.jar</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>when the two jars are present in the classpath of CRaSH, they will be detected and the plugin will be present.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_3"><a class="anchor" href="#_configuration_3"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Configuration is done with CRaSH properties:</p>
</div>
<div class="listingblock">
<div class="title">Configuring an SMTP server for the CRaSH plugin</div>
<div class="content">
<pre class="nowrap">crash.mail.smtp.host=smtp.gmail.com
crash.mail.smtp.port=587
crash.mail.smtp.secure=tls
crash.mail.smtp.username=admin
crash.mail.smtp.password=admin
crash.mail.smtp.from=admin@mydomain.org
crash.mail.debug=false</pre>
</div>
</div>
<div class="paragraph">
<p>The configuration is pretty obvious and follow the usual JavaMail configuration properties.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mail_command"><a class="anchor" href="#_mail_command"></a>Mail command</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The mail command can be used to send emails. The command consumes a stream of objects and render them
to text before sending the email.</p>
</div>
<div class="listingblock">
<div class="title">Send an email with a JVM thread dump</div>
<div class="content">
<pre class="nowrap">% thread ls | thread dump | mail -s "The thread dump" admin@foo.com</pre>
</div>
</div>
</div>
</div>
<h1 id="_cron_plugin" class="sect0"><a class="anchor" href="#_cron_plugin"></a>Cron plugin</h1>
<div class="paragraph">
<p>CRaSH provides a cron plugin for scheduling tasks, the plugin is a thin wrapper of the
<a href="http://www.sauronsoftware.it/projects/cron4j/">cron4j</a> library.</p>
</div>
<div class="sect1">
<h2 id="_deployment_2"><a class="anchor" href="#_deployment_2"></a>Deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin consist of two jars:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the cron4j jar <code>cron4j-2.2.5.jar</code></p>
</li>
<li>
<p>the plugin jar <code>crash.plugins.cron-1.3.0-beta21.jar</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>when the two jars are present in the classpath of CRaSH, they will be detected and the plugin will be present.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_file"><a class="anchor" href="#_configuration_file"></a>Configuration file</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin is configured mainly through the <code>crontab</code> configuration file. This file looks pretty much like any
other crontab configuration file it consists of two parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a scheduling pattern, for instance <code>* * * * *</code>, this is <a href="http://www.sauronsoftware.it/projects/cron4j/manual.php#p02">documented</a> in the cron4j library</p>
</li>
<li>
<p>a command line to execute</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Send an mail with a JVM thread dump once every hour, at the begin of the fifth minute (00:05, 01:05, 02:05 etc.).</div>
<div class="content">
<pre class="nowrap">5 * * * * thread ls | thread dump | mail -s "the threads" -b admin@gmail.com</pre>
</div>
</div>
</div>
</div>
<h1 id="_hey_i_want_to_contribute" class="sect0"><a class="anchor" href="#_hey_i_want_to_contribute"></a>Hey, I want to contribute!</h1>
<div class="paragraph">
<p>Drop me an email. You can find my email on <a href="http://www.julienviet.com">http://www.julienviet.com</a>. Any kind of help is welcome.</p>
</div>
<div class="sect1">
<h2 id="_commands_reference"><a class="anchor" href="#_commands_reference"></a>Appendix A: Commands reference</h2>
<div class="sectionbody">
<div class="sect1">
<h2 id="_dashboard"><a class="anchor" href="#_dashboard"></a>dashboard</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       dashboard - a monitoring dashboard

SYNOPSIS
       dashboard [-h | --help]

STREAM
       dashboard &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_egrep"><a class="anchor" href="#_egrep"></a>egrep</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       egrep - search file(s) for lines that match a pattern

SYNOPSIS
       egrep [-h | --help] &lt;pattern&gt;

STREAM
       egrep &lt;org.crsh.text.Chunk, org.crsh.text.Chunk&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;pattern&gt;
           the search pattern
</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_env"><a class="anchor" href="#_env"></a>env</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       env - display the term env

SYNOPSIS
       env [-h | --help]

STREAM
       env &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_filter"><a class="anchor" href="#_filter"></a>filter</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       filter - a filter for a stream of map

SYNOPSIS
       filter [-p | --pattern] [-h | --help]

STREAM
       filter &lt;java.util.Map, java.util.Map&gt;

PARAMETERS
       [-p | --pattern]
           format &lt;key&gt;:&lt;value&gt;

       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java"><a class="anchor" href="#_java"></a>java</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       java - various java language commands

SYNOPSIS
       java [-h | --help] COMMAND [ARGS]

PARAMETERS
       [-h | --help]
           Display this help message

COMMANDS
       type
           print information about a java type
</pre>
</div>
</div>
<div class="sect2">
<h3 id="_java_type"><a class="anchor" href="#_java_type"></a>java type</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       java type - print information about a java type

SYNOPSIS
       java [-h | --help] type &lt;name&gt;

STREAM
       java type &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;name&gt;
           The full qualified type name
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jdbc"><a class="anchor" href="#_jdbc"></a>jdbc</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       jdbc - JDBC connection

SYNOPSIS
       jdbc [-h | --help] COMMAND [ARGS]

PARAMETERS
       [-h | --help]
           Display this help message

COMMANDS
       props
           show the database properties

       close
           close the current connection

       table
           describe the tables

       open
           open a connection from JNDI bound datasource

       connect
           connect to database with a JDBC connection string

       info
           describe the database

       execute
           execute a SQL statement

       select
           select SQL statement

       tables
           describe the tables
</pre>
</div>
</div>
<div class="sect2">
<h3 id="_jdbc_props"><a class="anchor" href="#_jdbc_props"></a>jdbc props</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jdbc props - show the database properties

SYNOPSIS
       jdbc [-h | --help] props

STREAM
       jdbc props &lt;java.lang.Void, java.util.Map&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdbc_close"><a class="anchor" href="#_jdbc_close"></a>jdbc close</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jdbc close - close the current connection

SYNOPSIS
       jdbc [-h | --help] close

STREAM
       jdbc close &lt;java.lang.Void, java.lang.String&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdbc_table"><a class="anchor" href="#_jdbc_table"></a>jdbc table</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jdbc table - describe the tables

SYNOPSIS
       jdbc [-h | --help] table &lt;tableNames&gt;...

STREAM
       jdbc table &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;tableNames&gt;...
           the table names
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdbc_open"><a class="anchor" href="#_jdbc_open"></a>jdbc open</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jdbc open - open a connection from JNDI bound datasource

SYNOPSIS
       jdbc [-h | --help] open &lt;globalName&gt;

STREAM
       jdbc open &lt;java.lang.Void, java.lang.String&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;globalName&gt;
           The datasource JNDI name
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdbc_connect"><a class="anchor" href="#_jdbc_connect"></a>jdbc connect</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jdbc connect - connect to database with a JDBC connection string

SYNOPSIS
       jdbc [-h | --help] connect [-u | --username] [-p | --password] [--properties] &lt;connectionString&gt;

STREAM
       jdbc connect &lt;java.lang.Void, java.lang.String&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       [-u | --username]
           The username

       [-p | --password]
           The password

       [--properties]
           The extra properties

       &lt;connectionString&gt;
           The connection string
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdbc_info"><a class="anchor" href="#_jdbc_info"></a>jdbc info</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jdbc info - describe the database

SYNOPSIS
       jdbc [-h | --help] info

STREAM
       jdbc info &lt;java.lang.Void, java.util.Map&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdbc_execute"><a class="anchor" href="#_jdbc_execute"></a>jdbc execute</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jdbc execute - execute a SQL statement

SYNOPSIS
       jdbc [-h | --help] execute &lt;statement&gt;...

STREAM
       jdbc execute &lt;java.lang.Void, java.lang.String&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;statement&gt;...
           The statement
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdbc_select"><a class="anchor" href="#_jdbc_select"></a>jdbc select</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jdbc select - select SQL statement

SYNOPSIS
       jdbc [-h | --help] select &lt;statement&gt;...

STREAM
       jdbc select &lt;java.lang.Void, java.util.Map&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;statement&gt;...
           The statement
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdbc_tables"><a class="anchor" href="#_jdbc_tables"></a>jdbc tables</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jdbc tables - describe the tables

SYNOPSIS
       jdbc [-h | --help] tables

STREAM
       jdbc tables &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jmx"><a class="anchor" href="#_jmx"></a>jmx</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       jmx - Java Management Extensions

SYNOPSIS
       jmx [-h | --help] COMMAND [ARGS]

PARAMETERS
       [-h | --help]
           Display this help message

COMMANDS
       get
           get attributes of an MBean

       find
           find mbeans

       attributes
           return the attributes info of an MBean
</pre>
</div>
</div>
<div class="sect2">
<h3 id="_jmx_get"><a class="anchor" href="#_jmx_get"></a>jmx get</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jmx get - get attributes of an MBean

SYNOPSIS
       jmx [-h | --help] get &lt;arg&gt;...

STREAM
       jmx get &lt;javax.management.ObjectName, java.util.Map&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;arg&gt;...
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jmx_find"><a class="anchor" href="#_jmx_find"></a>jmx find</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jmx find - find mbeans

SYNOPSIS
       jmx [-h | --help] find [-p | --pattern]

STREAM
       jmx find &lt;java.lang.Void, javax.management.ObjectName&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       [-p | --pattern]
           The object name pattern
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jmx_attributes"><a class="anchor" href="#_jmx_attributes"></a>jmx attributes</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jmx attributes - return the attributes info of an MBean

SYNOPSIS
       jmx [-h | --help] attributes &lt;arg&gt;

STREAM
       jmx attributes &lt;java.lang.Void, java.util.Map&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;arg&gt;
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jndi"><a class="anchor" href="#_jndi"></a>jndi</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       jndi - Java Naming and Directory Interface

SYNOPSIS
       jndi [-h | --help] COMMAND [ARGS]

PARAMETERS
       [-h | --help]
           Display this help message

COMMANDS
       find
           List JNDI resources
</pre>
</div>
</div>
<div class="sect2">
<h3 id="_jndi_find"><a class="anchor" href="#_jndi_find"></a>jndi find</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jndi find - List JNDI resources

SYNOPSIS
       jndi [-h | --help] find [-f | --filter] [-n | --name] [-v | --verbose] [-d | --datasources] [-e | --emf] [-m | --mail]

STREAM
       jndi find &lt;java.lang.Void, org.crsh.text.renderers.BindingRenderer$BindingData&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       [-f | --filter]
           Filter displayed resources using FQN type'

       [-n | --name]
           Filter displayed resources using name'

       [-v | --verbose]
           Display resource type'

       [-d | --datasources]
           Apply a filter on 'javax.sql.DataSource'

       [-e | --emf]
           Apply a filter on 'javax.persistence.EntityManagerFactory'

       [-m | --mail]
           Apply a filter on 'javax.mail.Session'
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jpa"><a class="anchor" href="#_jpa"></a>jpa</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       jpa - Java persistance API

SYNOPSIS
       jpa [-h | --help] COMMAND [ARGS]

PARAMETERS
       [-h | --help]
           Display this help message

COMMANDS
       close
           Close the current JPA session

       open
           Open a JPA session

       entity
           Display JPA entity

       select
           Execute select JPA query

       entities
           List JPA entities
</pre>
</div>
</div>
<div class="sect2">
<h3 id="_jpa_close"><a class="anchor" href="#_jpa_close"></a>jpa close</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jpa close - Close the current JPA session

SYNOPSIS
       jpa [-h | --help] close

STREAM
       jpa close &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jpa_open"><a class="anchor" href="#_jpa_open"></a>jpa open</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jpa open - Open a JPA session

SYNOPSIS
       jpa [-h | --help] open &lt;jndiName&gt;

STREAM
       jpa open &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;jndiName&gt;
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jpa_entity"><a class="anchor" href="#_jpa_entity"></a>jpa entity</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jpa entity - Display JPA entity

SYNOPSIS
       jpa [-h | --help] entity &lt;name&gt;

STREAM
       jpa entity &lt;java.lang.Void, org.crsh.text.renderers.EntityTypeRenderer$EntityTypeData&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;name&gt;
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jpa_select"><a class="anchor" href="#_jpa_select"></a>jpa select</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jpa select - Execute select JPA query

SYNOPSIS
       jpa [-h | --help] select &lt;statements&gt;...

STREAM
       jpa select &lt;java.lang.Void, java.util.Map&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;statements&gt;...
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jpa_entities"><a class="anchor" href="#_jpa_entities"></a>jpa entities</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jpa entities - List JPA entities

SYNOPSIS
       jpa [-h | --help] entities

STREAM
       jpa entities &lt;java.lang.Void, org.crsh.text.renderers.EntityTypeRenderer$EntityTypeData&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jvm"><a class="anchor" href="#_jvm"></a>jvm</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm - JVM informations

SYNOPSIS
       jvm [-h | --help] COMMAND [ARGS]

PARAMETERS
       [-h | --help]
           Display this help message

COMMANDS
       gc
           Show JVM garbage collection

       system
           Show JVM operating system

       runtime
           Show JVM runtime

       heap
           Show JVM memory heap

       pools
           Show JVM memory pools

       pool
           Show JVM memory pool

       classloading
           Show JVM classloding

       compilation
           Show JVM compilation

       nonheap
           Show JVM memory non heap

       top
</pre>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_gc"><a class="anchor" href="#_jvm_gc"></a>jvm gc</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm gc - Show JVM garbage collection

SYNOPSIS
       jvm [-h | --help] gc

STREAM
       jvm gc &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_system"><a class="anchor" href="#_jvm_system"></a>jvm system</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm system - Show JVM operating system

SYNOPSIS
       jvm [-h | --help] system

STREAM
       jvm system &lt;java.lang.Void, java.util.Map&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_runtime"><a class="anchor" href="#_jvm_runtime"></a>jvm runtime</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm runtime - Show JVM runtime

SYNOPSIS
       jvm [-h | --help] runtime

STREAM
       jvm runtime &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_heap"><a class="anchor" href="#_jvm_heap"></a>jvm heap</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm heap - Show JVM memory heap

SYNOPSIS
       jvm [-h | --help] heap

STREAM
       jvm heap &lt;java.lang.Void, java.lang.management.MemoryUsage&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_pools"><a class="anchor" href="#_jvm_pools"></a>jvm pools</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm pools - Show JVM memory pools

SYNOPSIS
       jvm [-h | --help] pools

STREAM
       jvm pools &lt;java.lang.Void, java.lang.String&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_pool"><a class="anchor" href="#_jvm_pool"></a>jvm pool</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm pool - Show JVM memory pool

SYNOPSIS
       jvm [-h | --help] pool &lt;pools&gt;...

STREAM
       jvm pool &lt;java.lang.String, java.lang.management.MemoryUsage&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;pools&gt;...
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_classloading"><a class="anchor" href="#_jvm_classloading"></a>jvm classloading</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm classloading - Show JVM classloding

SYNOPSIS
       jvm [-h | --help] classloading

STREAM
       jvm classloading &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_compilation"><a class="anchor" href="#_jvm_compilation"></a>jvm compilation</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm compilation - Show JVM compilation

SYNOPSIS
       jvm [-h | --help] compilation

STREAM
       jvm compilation &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_nonheap"><a class="anchor" href="#_jvm_nonheap"></a>jvm nonheap</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm nonheap - Show JVM memory non heap

SYNOPSIS
       jvm [-h | --help] nonheap

STREAM
       jvm nonheap &lt;java.lang.Void, java.lang.management.MemoryUsage&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_top"><a class="anchor" href="#_jvm_top"></a>jvm top</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       jvm top

SYNOPSIS
       jvm [-h | --help] top

STREAM
       jvm top &lt;java.lang.Void, java.lang.management.MemoryUsage&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_less"><a class="anchor" href="#_less"></a>less</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       less - more...

SYNOPSIS
       less [-h | --help]

STREAM
       less &lt;org.crsh.text.Chunk, org.crsh.text.Chunk&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_log"><a class="anchor" href="#_log"></a>log</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       log - logging commands

SYNOPSIS
       log [-h | --help] COMMAND [ARGS]

PARAMETERS
       [-h | --help]
           Display this help message

COMMANDS
       add
           create one or several loggers

       set
           The set command sets the level of a logger. One or several logger names can be specified as
           arguments and the -l option specify the level among the finest, finer, fine, info, warn and
           severe levels. When no level is specified, the level is cleared and the level will be
           inherited from its ancestors.

           % log set -l trace foo
           % log set foo

           The logger name can be omitted and instead stream of logger can be consumed as it is a
           &lt;Logger,Void&gt; command. The following set the level warn on all the available loggers:

           % log ls | log set -l warn

       tail
           The tail command provides a tail view of a list of loggers. One or several logger names can
           be specified as argument and the -l option configures the level threshold. When no logger
           name is specified, the root logger will be tailed, when no level is specified, the info
           level will be used:

           % log tail
           Feb 10, 2014 1:50:36 PM java_util_logging_Logger$log call
           INFO: HELLO

           The tail process will end upon interruption (ctrl-c).

       ls
           The log ls command list all the available loggers., for instance:

           % log ls
           org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/].[default]
           org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/eXoGadgetServer].[concat]
           org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/dashboard].[jsp]
           ...

           The -f switch provides filtering with a Java regular expression

           % log ls -f javax.*
           javax.management.mbeanserver
           javax.management.modelmbean

           The log ls command is a &lt;Void,Logger&gt; command, therefore any logger produced can be
           consumed.

       send
           The send command log one or several loggers with a specified message. For instance the
           following impersonates the javax.management.mbeanserver class and send a message on its own
           logger.

           #% log send -m hello javax.management.mbeanserver

           Send is a &lt;Logger, Void&gt; command, it can log messages to consumed log objects:

           % log ls | log send -m hello -l warn
</pre>
</div>
</div>
<div class="sect2">
<h3 id="_log_add"><a class="anchor" href="#_log_add"></a>log add</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       log add - create one or several loggers

SYNOPSIS
       log [-h | --help] add &lt;name&gt;...

STREAM
       log add &lt;java.lang.Void, java.util.logging.Logger&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;name&gt;...
           The name of the logger
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_log_set"><a class="anchor" href="#_log_set"></a>log set</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       log set - configures the level of one of several loggers

SYNOPSIS
       log [-h | --help] set [-l | --level] &lt;name&gt;...

STREAM
       log set &lt;java.util.logging.Logger, java.lang.Object&gt;

DESCRIPTION
       The set command sets the level of a logger. One or several logger names can be specified as
       arguments and the -l option specify the level among the finest, finer, fine, info, warn and
       severe levels. When no level is specified, the level is cleared and the level will be
       inherited from its ancestors.

       % log set -l trace foo
       % log set foo

       The logger name can be omitted and instead stream of logger can be consumed as it is a
       &lt;Logger,Void&gt; command. The following set the level warn on all the available loggers:

       % log ls | log set -l warn

PARAMETERS
       [-h | --help]
           Display this help message

       [-l | --level]
           The logger level to assign among {trace, debug, info, warn, error}

       &lt;name&gt;...
           The name of the logger
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_log_tail"><a class="anchor" href="#_log_tail"></a>log tail</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       log tail - tail loggers

SYNOPSIS
       log [-h | --help] tail [-l | --level] &lt;name&gt;...

STREAM
       log tail &lt;java.lang.Void, java.util.logging.LogRecord&gt;

DESCRIPTION
       The tail command provides a tail view of a list of loggers. One or several logger names can
       be specified as argument and the -l option configures the level threshold. When no logger
       name is specified, the root logger will be tailed, when no level is specified, the info
       level will be used:

       % log tail
       Feb 10, 2014 1:50:36 PM java_util_logging_Logger$log call
       INFO: HELLO

       The tail process will end upon interruption (ctrl-c).

PARAMETERS
       [-h | --help]
           Display this help message

       [-l | --level]
           The logger level to assign among {trace, debug, info, warn, error}

       &lt;name&gt;...
           The name of the logger
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_log_ls"><a class="anchor" href="#_log_ls"></a>log ls</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       log ls - list the available loggers

SYNOPSIS
       log [-h | --help] ls [-f | --filter]

STREAM
       log ls &lt;java.lang.Void, java.util.logging.Logger&gt;

DESCRIPTION
       The log ls command list all the available loggers., for instance:

       % log ls
       org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/].[default]
       org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/eXoGadgetServer].[concat]
       org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/dashboard].[jsp]
       ...

       The -f switch provides filtering with a Java regular expression

       % log ls -f javax.*
       javax.management.mbeanserver
       javax.management.modelmbean

       The log ls command is a &lt;Void,Logger&gt; command, therefore any logger produced can be
       consumed.

PARAMETERS
       [-h | --help]
           Display this help message

       [-f | --filter]
           A regular expressions used to filter the loggers
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_log_send"><a class="anchor" href="#_log_send"></a>log send</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       log send - send a message to a logger

SYNOPSIS
       log [-h | --help] send [-m | --message] [-l | --level] &lt;name&gt;

STREAM
       log send &lt;java.util.logging.Logger, java.lang.Object&gt;

DESCRIPTION
       The send command log one or several loggers with a specified message. For instance the
       following impersonates the javax.management.mbeanserver class and send a message on its own
       logger.

       #% log send -m hello javax.management.mbeanserver

       Send is a &lt;Logger, Void&gt; command, it can log messages to consumed log objects:

       % log ls | log send -m hello -l warn

PARAMETERS
       [-h | --help]
           Display this help message

       [-m | --message]
           The message to log

       [-l | --level]
           The logger level to assign among {trace, debug, info, warn, error}

       &lt;name&gt;
           The name of the logger
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_man"><a class="anchor" href="#_man"></a>man</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       man - format and display the on-line manual pages

SYNOPSIS
       man [-h | --help] &lt;command&gt;

STREAM
       man &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;command&gt;
           the command
</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_shell"><a class="anchor" href="#_shell"></a>shell</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       shell - shell related command

SYNOPSIS
       shell [-h | --help] COMMAND [ARGS]

PARAMETERS
       [-h | --help]
           Display this help message

COMMANDS
       properties
           list the configuration properties and their description

       plugins
           list the loaded plugins and their configuration
</pre>
</div>
</div>
<div class="sect2">
<h3 id="_shell_properties"><a class="anchor" href="#_shell_properties"></a>shell properties</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       shell properties - list the configuration properties and their description

SYNOPSIS
       shell [-h | --help] properties

STREAM
       shell properties &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_shell_plugins"><a class="anchor" href="#_shell_plugins"></a>shell plugins</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       shell plugins - list the loaded plugins and their configuration

SYNOPSIS
       shell [-h | --help] plugins

STREAM
       shell plugins &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sleep"><a class="anchor" href="#_sleep"></a>sleep</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       sleep - sleep for some time

SYNOPSIS
       sleep [-h | --help] &lt;time&gt;

STREAM
       sleep &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;time&gt;
           sleep time in seconds
</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sort"><a class="anchor" href="#_sort"></a>sort</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       sort - sort a map

SYNOPSIS
       sort [-f | --fields] [-h | --help]

STREAM
       sort &lt;java.util.Map, java.util.Map&gt;

PARAMETERS
       [-f | --fields]
           Filed used to sort

       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_system"><a class="anchor" href="#_system"></a>system</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       system - vm system properties commands

SYNOPSIS
       system [-h | --help] COMMAND [ARGS]

PARAMETERS
       [-h | --help]
           Display this help message

COMMANDS
       gc
           call garbage collector

       propls
           list the vm system properties

       propset
           set a system property

       propget
           get a system property

       proprm
           remove a system property

       freemem
           show free memory

       totalmem
           show total memory
</pre>
</div>
</div>
<div class="sect2">
<h3 id="_system_gc"><a class="anchor" href="#_system_gc"></a>system gc</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       system gc - call garbage collector

SYNOPSIS
       system [-h | --help] gc

STREAM
       system gc &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_system_propls"><a class="anchor" href="#_system_propls"></a>system propls</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       system propls - list the vm system properties

SYNOPSIS
       system [-h | --help] propls [-f | --filter]

STREAM
       system propls &lt;java.lang.Void, java.util.Map&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       [-f | --filter]
           filter the property with a regular expression on their name
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_system_propset"><a class="anchor" href="#_system_propset"></a>system propset</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       system propset - set a system property

SYNOPSIS
       system [-h | --help] propset &lt;name&gt; &lt;value&gt;

STREAM
       system propset &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;name&gt;
           The name of the property

       &lt;value&gt;
           The value of the property
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_system_propget"><a class="anchor" href="#_system_propget"></a>system propget</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       system propget - get a system property

SYNOPSIS
       system [-h | --help] propget &lt;name&gt;

STREAM
       system propget &lt;java.lang.Void, java.lang.String&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;name&gt;
           The name of the property
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_system_proprm"><a class="anchor" href="#_system_proprm"></a>system proprm</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       system proprm - remove a system property

SYNOPSIS
       system [-h | --help] proprm &lt;name&gt;

STREAM
       system proprm &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;name&gt;
           The name of the property
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_system_freemem"><a class="anchor" href="#_system_freemem"></a>system freemem</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       system freemem - show free memory

SYNOPSIS
       system [-h | --help] freemem [-u | --unit] [-d | --decimal]

STREAM
       system freemem &lt;java.lang.Void, java.lang.String&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       [-u | --unit]
           The unit of the memory space size {(B)yte, (O)ctet, (M)egaOctet, (G)igaOctet}

       [-d | --decimal]
           The number of decimal (default 0)
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_system_totalmem"><a class="anchor" href="#_system_totalmem"></a>system totalmem</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       system totalmem - show total memory

SYNOPSIS
       system [-h | --help] totalmem [-u | --unit] [-d | --decimal]

STREAM
       system totalmem &lt;java.lang.Void, java.lang.String&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       [-u | --unit]
           The unit of the memory space size {(B)yte, (O)ctet, (M)egaOctet, (G)igaOctet}

       [-d | --decimal]
           The number of decimal (default 0)
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_thread_2"><a class="anchor" href="#_thread_2"></a>thread</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       thread - JVM thread commands

SYNOPSIS
       thread [-h | --help] COMMAND [ARGS]

DESCRIPTION
       The thread command provides introspection and control over JVM threads:

       % thread ls
       ID   PRIORITY  STATE          INTERRUPTED  DAEMON  NAME
       2    10        WAITING        false        true    Reference Handler
       3    8         WAITING        false        true    Finalizer
       6    9         RUNNABLE       false        true    Signal Dispatcher
       1    5         WAITING        false        false   main
       13   1         TIMED_WAITING  false        true    Poller SunPKCS11-Darwin
       14   5         WAITING        false        false   pool-1-thread-1
       15   5         WAITING        false        false   pool-1-thread-2
       16   5         WAITING        false        false   pool-1-thread-3
       17   5         WAITING        false        false   pool-1-thread-4
       27   5         WAITING        false        false   pool-1-thread-6
       19   5         RUNNABLE       false        false   org.crsh.standalone.CRaSH.main()

       % thread stop 14
       Stopped thread Thread[pool-1-thread-1,5,main]

       % thread interrupt 17
       Interrupted thread Thread[pool-1-thread-1,5,main]

       In addition of the classical usage, the various commands (ls, stop, interrupt) can be
       combined with a pipe, the most common operation is to combine the ls command with the stop,
       interrupt or dump command, for instance the following command will interrupt all the thread
       having a name starting with the 'pool' prefix:

       % thread ls --filter pool.* | thread interrupt
       Interrupted thread Thread[pool-1-thread-1,5,main]
       Interrupted thread Thread[pool-1-thread-2,5,main]
       Interrupted thread Thread[pool-1-thread-3,5,main]
       Interrupted thread Thread[pool-1-thread-4,5,main]
       Interrupted thread Thread[pool-1-thread-5,5,main]

PARAMETERS
       [-h | --help]
           Display this help message

COMMANDS
       stop
           Stop VM threads.

       interrupt
           Interrup VM threads.

       ls
           list the vm threads

       top
           thread top

       dump
           Dump VM threads.
</pre>
</div>
</div>
<div class="sect2">
<h3 id="_thread_stop"><a class="anchor" href="#_thread_stop"></a>thread stop</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       thread stop - stop vm threads

SYNOPSIS
       thread [-h | --help] stop &lt;threads&gt;...

STREAM
       thread stop &lt;java.lang.Thread, java.lang.Thread&gt;

DESCRIPTION
       Stop VM threads.

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;threads&gt;...
           the thread ids to stop
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_thread_interrupt"><a class="anchor" href="#_thread_interrupt"></a>thread interrupt</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       thread interrupt - interrupt vm threads

SYNOPSIS
       thread [-h | --help] interrupt &lt;threads&gt;...

STREAM
       thread interrupt &lt;java.lang.Thread, java.lang.Thread&gt;

DESCRIPTION
       Interrup VM threads.

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;threads&gt;...
           the thread ids to interrupt
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_thread_ls"><a class="anchor" href="#_thread_ls"></a>thread ls</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       thread ls - list the vm threads

SYNOPSIS
       thread [-h | --help] ls [-n | --name] [-g | --group] [-s | --state]

STREAM
       thread ls &lt;java.lang.Void, java.lang.Thread&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       [-n | --name]
           Filter the threads with a glob expression on their name

       [-g | --group]
           Filter the threads with a glob expression on their group

       [-s | --state]
           Filter the threads by their status (new,runnable,blocked,waiting,timed_waiting,terminated)
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_thread_top"><a class="anchor" href="#_thread_top"></a>thread top</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       thread top - thread top

SYNOPSIS
       thread [-h | --help] top [-n | --name] [-g | --group] [-s | --state]

STREAM
       thread top &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       [-n | --name]
           Filter the threads with a glob expression on their name

       [-g | --group]
           Filter the threads with a glob expression on their group

       [-s | --state]
           Filter the threads by their status (new,runnable,blocked,waiting,timed_waiting,terminated)
</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_thread_dump"><a class="anchor" href="#_thread_dump"></a>thread dump</h3>
<div class="listingblock">
<div class="content">
<pre>NAME
       thread dump - dump vm threads

SYNOPSIS
       thread [-h | --help] dump &lt;threads&gt;...

STREAM
       thread dump &lt;java.lang.Thread, java.lang.Object&gt;

DESCRIPTION
       Dump VM threads.

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;threads&gt;...
           the thread ids to dump
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_help"><a class="anchor" href="#_help"></a>help</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       help - provides basic help

SYNOPSIS
       help [-h | --help]

STREAM
       help &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message
</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_repl"><a class="anchor" href="#_repl"></a>repl</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>NAME
       repl - list the repl or change the current repl

SYNOPSIS
       repl [-h | --help] &lt;arg&gt;

STREAM
       repl &lt;java.lang.Void, java.lang.Object&gt;

PARAMETERS
       [-h | --help]
           Display this help message

       &lt;arg&gt;
           the optional repl name
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2014-05-20 09:02:25 CEST
</div>
</div>
</body>
</html>